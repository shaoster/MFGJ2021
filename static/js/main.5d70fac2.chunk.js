(this.webpackJsonpmfgj202106=this.webpackJsonpmfgj202106||[]).push([[0],{107:function(e,t,a){},108:function(e,t,a){},147:function(e,t){},150:function(e,t,a){"use strict";a.r(t);var n,r,s=a(7),c=a(22),i=a.n(c),l=(a(107),a(108),a(94)),E=a(16),O=a(14),N=a(174),o=a(175),d=a(13),u=a(21),I=a(171),R=a(172),F=a(173),h=a(36),T=a(179),p=a(178),b=a(0),j=a(1),C=16;!function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON",e[e.ACCENT=2]="ACCENT"}(n||(n={})),function(e){e[e.INCREMENT=0]="INCREMENT",e[e.DECREMENT=1]="DECREMENT",e[e.ZERO=2]="ZERO",e[e.MAX=3]="MAX",e[e.SHIFT_UP=4]="SHIFT_UP",e[e.SHIFT_RIGHT=5]="SHIFT_RIGHT",e[e.SHIFT_DOWN=6]="SHIFT_DOWN",e[e.SHIFT_LEFT=7]="SHIFT_LEFT",e[e.IGNORE=8]="IGNORE"}(r||(r={}));var G=function(e,t){var a,s=Object(d.a)(t.steps),c=Object(E.a)(e.entries());try{var i=function(){var e=Object(O.a)(a.value,2),c=e[0],i=e[1];s[c]=function(){var e=t.steps[c];switch(i){case r.INCREMENT:return e===n.OFF?n.ON:n.ACCENT;case r.DECREMENT:return e===n.ACCENT?n.ON:n.OFF;case r.MAX:return n.ACCENT;case r.ZERO:return n.OFF;case r.SHIFT_UP:return c+4>C?n.OFF:t.steps[c+4];case r.SHIFT_RIGHT:return c%4===0?n.OFF:t.steps[c-1];case r.SHIFT_DOWN:return c-4<0?n.OFF:t.steps[c-4];case r.SHIFT_LEFT:return c%4+1===4?n.OFF:t.steps[c+1];default:return e}}()};for(c.s();!(a=c.n()).done;)i()}catch(l){c.e(l)}finally{c.f()}t.steps=s},m=function(){function e(t,a,n){Object(b.a)(this,e),this.title=void 0,this.description=void 0,this.image=void 0,this.sampleTarget=void 0,this.pattern=void 0,this.title=t.title,this.description=t.description,this.image=t.image,this.pattern=a,this.sampleTarget=n}return Object(j.a)(e,[{key:"playCard",value:function(e){var t,a=Object(E.a)(e.playerParts);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.sample===this.sampleTarget&&(this.pattern&&G(this.pattern,n))}}catch(r){a.e(r)}finally{a.f()}}}]),e}(),f={layFlat:new m({title:"Lay Flat",description:"Lay your shirt flat on your bed. The foundation of any laundry folding routine."},[r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE],"sd"),fold:new m({title:"Fold",description:"Fold your shirt. Add some complexity! (Assuming you have something to start with...)"},[r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE],"sd"),drop:new m({title:"Drop",description:"Oops! You dropped your [?] all over the floor. What a mess..."},[r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT],"bd"),mop:new m({title:"Mop",description:"Mop the floor. This mess might be a bit too much to soak up though."},[r.DECREMENT,r.DECREMENT,r.IGNORE,r.DECREMENT,r.DECREMENT,r.DECREMENT,r.IGNORE,r.DECREMENT,r.DECREMENT,r.DECREMENT,r.IGNORE,r.DECREMENT,r.DECREMENT,r.DECREMENT,r.IGNORE,r.DECREMENT],"bd"),sweep:new m({title:"Sweep",description:"Sweep the floor. It's a bit hard to reach that corner."},[r.ZERO,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.ZERO,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.ZERO,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.ZERO,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.SHIFT_RIGHT],"bd"),vacuum:new m({title:"Vacuum",description:"Suck up whatever is left. (Maybe leave 4 [?]s on the floor?)"},[r.INCREMENT,r.IGNORE,r.IGNORE,r.DECREMENT,r.INCREMENT,r.IGNORE,r.IGNORE,r.DECREMENT,r.INCREMENT,r.IGNORE,r.IGNORE,r.DECREMENT,r.INCREMENT,r.IGNORE,r.IGNORE,r.DECREMENT],"bd"),feast:new m({title:"Feast",description:"What a delicious meal! What are we going to do about all the dishes?"},[r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT],"ch"),bus:new m({title:"Bus",description:"What a delicious meal! What are we going to do about all the dishes?"},[r.SHIFT_LEFT,r.SHIFT_LEFT,r.SHIFT_LEFT,r.ZERO,r.SHIFT_LEFT,r.SHIFT_LEFT,r.SHIFT_LEFT,r.ZERO,r.SHIFT_LEFT,r.SHIFT_LEFT,r.SHIFT_LEFT,r.ZERO,r.SHIFT_LEFT,r.SHIFT_LEFT,r.SHIFT_LEFT,r.ZERO],"ch"),rinse:new m({title:"Rinse",description:"Rinse the dishes. This will make them easier to clean."},[r.IGNORE,r.ZERO,r.IGNORE,r.IGNORE,r.IGNORE,r.ZERO,r.IGNORE,r.IGNORE,r.IGNORE,r.ZERO,r.IGNORE,r.IGNORE,r.IGNORE,r.ZERO,r.IGNORE,r.IGNORE],"ch"),scour:new m({title:"Scour",description:"Scour the dishes. Really put your back into it."},[r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE],"ch"),dry:new m({title:"Dry",description:"Let the dishes dry. What a lovely sight!"},[r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE],"ch"),laundry:new m({title:"Laundry",description:"Do the laundry. You know how!"},[r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE],"sd"),floor:new m({title:"Floor",description:"Clean the floor. You know how!"},[r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE],"bd"),dishes:new m({title:"Dishes",description:"Do the dishes. You know how!"},[r.INCREMENT,r.IGNORE,r.MAX,r.IGNORE,r.INCREMENT,r.IGNORE,r.MAX,r.IGNORE,r.INCREMENT,r.IGNORE,r.MAX,r.IGNORE,r.INCREMENT,r.IGNORE,r.MAX,r.IGNORE],"ch")},y=a(4),v=a(95),M=a(169),g=a(176),S=a(170),x=a(15),H=["classSequence"],w=["parts","currentlyPlayingStep"],D=["parts","currentlyPlayingStep"];function _(e){var t=e.classSequence,a=(Object(u.a)(e,H),Object(h.chunk)(t,4));return Object(x.jsx)(x.Fragment,{children:a.map((function(e,t){return Object(x.jsx)("tr",{className:"row",children:e.map((function(e,t){return Object(x.jsx)("td",{className:e,children:Object(x.jsx)(v.a,{className:"step",variant:"outlined"})},"col "+t)}))},"row "+t)}))})}function k(e){var t=e.parts,a=e.currentlyPlayingStep,r=Object(u.a)(e,w),c=Object(s.useState)(0),i=Object(O.a)(c,2),l=i[0],E=i[1],N=t[l].steps,o=Object(h.take)(N,C).map((function(e,t){var r="cell ";return r+=n[e]+" ",null!==a&&t===a%C&&(r+="playing"),r}));return Object(s.createElement)("table",Object(y.a)(Object(y.a)({},r),{},{key:l}),Object(x.jsx)("caption",{children:Object(x.jsx)(M.a,{position:"relative",children:Object(x.jsx)(g.a,{variant:"fullWidth",value:l,onChange:function(e,t){return E(t)},className:"part-selector",children:t.map((function(e,t){return Object(x.jsx)(S.a,{label:e.sample,style:{minWidth:48}},"tab "+t)}))})})}),Object(x.jsx)("tbody",{children:Object(x.jsx)(_,{classSequence:o})}))}function L(e){var t=e.parts,a=e.currentlyPlayingStep,n=Object(u.a)(e,D);return Object(x.jsx)(x.Fragment,{children:Object(x.jsx)(k,Object(y.a)({parts:t,currentlyPlayingStep:a},n))})}var P=["cards","buttonLabel","onClickCard","unremovable","className"];function A(e){var t,a=e.cardId,n=e.cardIndex,s=e.buttonLabel,c=e.onClickCard,i=e.onClickEnabled,l=e.setSelectedCard,E=e.isSelectedCard,O=f[a],o=null===(t=O.pattern)||void 0===t?void 0:t.map((function(e){return"cell "+r[e]}));return Object(x.jsxs)(I.a,{variant:"outlined",className:"card",onClick:function(){l(E?0:n)},children:[Object(x.jsxs)(R.a,{children:[Object(x.jsx)("h2",{children:O.title}),O.sampleTarget&&Object(x.jsx)("span",{children:O.sampleTarget}),o&&Object(x.jsx)("table",{className:"pattern",children:Object(x.jsx)("tbody",{children:Object(x.jsx)(_,{classSequence:o})})}),Object(x.jsx)("p",{children:O.description})]}),Object(x.jsx)(F.a,{children:Object(x.jsx)(N.a,{variant:"contained",onClick:function(){return c(n)},disabled:!i,children:s})})]})}var Z=Object(h.range)(6).map((function(e){return"card-hide"}));function W(e){var t=e.cards,a=e.buttonLabel,n=e.onClickCard,r=e.unremovable,c=e.className,i=(Object(u.a)(e,P),Object(s.useState)(t.length-1)),l=Object(O.a)(i,2),E=l[0],N=l[1],o=Object(s.useState)(0),I=Object(O.a)(o,2),R=I[0],F=I[1],h=Object(s.useState)(Z),b=Object(O.a)(h,2),j=b[0],C=b[1];Object(s.useEffect)((function(){if(0===t.length)return C(Z),F(0),void N(0);if(R!==E){for(var e=Object(d.a)(Z),a=function(t){var a=E>0?t<E?t<R||0===R?"stay-hidden":"hide":R>0&&t>=R?"stay-displaced":"displace":t<R?"stay-hidden":"hide";e[t]="card-"+a},n=0;n<6;n++)a(n);C(e),F(E)}}),[t,E,R]);var G=function(e){e>=r&&n(e)};return Object(x.jsx)("div",{className:"sequence "+c,children:Object(x.jsx)(T.a,{component:null,children:t.map((function(e,t){return Object(x.jsx)(p.a,{exit:!0,classNames:"card",timeout:200,children:Object(x.jsx)("div",{className:"card-slot "+j[t],style:{zIndex:6-t},children:Object(x.jsx)(A,{cardId:e,cardIndex:t,buttonLabel:a,onClickCard:function(){return G(t)},onClickEnabled:t>=r,setSelectedCard:N,isSelectedCard:t===E})})},t)}))})})}var X="/mfgj202106/samples/levels/",q=[{title:"The Laundry",description:["laundry laundry laundry","laundry laundry"],levelTrack:"".concat(X,"dummy116bpm.ogg"),targetParts:[{sample:"sd",steps:[n.OFF,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF]}],startingHand:["layFlat","fold"],startingSchedule:[]},{title:"The Floor",description:["floor sweepy sweepy floor","sweepy sweepy floor floor"],levelTrack:"".concat(X,"dummy116bpm.ogg"),targetParts:[{sample:"bd",steps:[n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF]}],startingHand:["mop","sweep","vacuum"],startingSchedule:["drop"]},{title:"The Dishes",description:["dishy dishy wishy wash","washa dishy dish dish"],levelTrack:"".concat(X,"dummy116bpm.ogg"),targetParts:[{sample:"ch",steps:[n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF]}],startingHand:["bus","rinse","scour","dry"],startingSchedule:["feast"]},{title:"Putting it All Together",description:["every every thing thing","all at once"],levelTrack:"".concat(X,"dummy116bpm.ogg"),targetParts:[{sample:"sd",steps:[n.OFF,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF]},{sample:"bd",steps:[n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF]},{sample:"ch",steps:[n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF]}],startingHand:["laundry","floor","dishes"],startingSchedule:[]}],B=a(11),U=function(e){var t,a,r=q[e-1],s=r.targetParts.map((function(e){return{sample:e.sample,steps:Array.from({length:C},(function(){return n.OFF}))}})),c=Object(y.a)(Object(y.a)({},r),{},{playerParts:s,playerHand:Object(d.a)(r.startingHand),playerSchedule:Object(d.a)(null!==(t=r.startingSchedule)&&void 0!==t?t:[])});return(null!==(a=r.startingSchedule)&&void 0!==a?a:[]).forEach((function(e){return f[e].playCard(c)})),c},Y=function(e){var t,a=Object(E.a)(e.targetParts.entries());try{for(a.s();!(t=a.n()).done;)for(var n=Object(O.a)(t.value,2),r=n[0],s=n[1],c=e.playerParts[r],i=0;i<C;i++)if(c.steps[i]!==s.steps[i])return!1}catch(l){a.e(l)}finally{a.f()}return!0},J={moves:{playCard:function(e,t,a){var n=e.playerHand[a];f[n].playCard(e),e.playerHand.splice(a,1),e.playerSchedule.push(n)},removeCard:function(e,t,a){if(a<e.startingSchedule.length)return B.x;var n=U(t.turn);n.playerHand=Object(d.a)(e.playerHand);var r=e.playerSchedule[a];n.playerHand.push(r);var s,c=Object(E.a)(e.playerSchedule.entries());try{for(c.s();!(s=c.n()).done;){var i=Object(O.a)(s.value,2),l=i[0],N=i[1];if(!(l===a||l<e.startingSchedule.length))f[N].playCard(n),n.playerSchedule.push(N)}}catch(o){c.e(o)}finally{c.f()}return n},commitSchedule:function(e,t){var a,n;Y(e)&&(null===(a=t.events)||void 0===a||null===(n=a.endTurn)||void 0===n||n.call(a))}},turn:{onBegin:function(e,t){return U(t.turn)}}},z=a(35),V=a(177);function K(e){var t=e.turn,a=e.onDismiss,n=Object(s.useState)(t),r=Object(O.a)(n,2),c=r[0],i=r[1],l=Object(s.useState)(!0),E=Object(O.a)(l,2),N=E[0],o=E[1];Object(s.useEffect)((function(){t!==c&&o(!0)}),[c,t]);var d=function(){o(!1),i(t),a()},u=q[t-1];return Object(x.jsx)(V.a,{open:N,onClose:d,onClick:d,children:Object(x.jsx)(v.a,{variant:"outlined",className:"event-modal",children:Object(x.jsxs)("div",{className:"event-body",children:[Object(x.jsx)("h1",{children:u.title}),u.description.map((function(e,t){return Object(x.jsx)("p",{children:e},t)})),Object(x.jsx)("p",{children:"Press Escape or click/tap anywhere to continue..."})]})})})}function Q(e){var t=e.G,a=e.onClick,n=Y(t);return Object(x.jsx)(N.a,{variant:"contained",onClick:a,disabled:!n,children:"Next Day"})}var $={bd:"e4",ch:"d4",sd:"c4"},ee=new z.b({urls:{e4:"BD/E808_BD[short]-03.wav",d4:"CH/E808_CH-06.wav",c4:"SD/E808_SD-03.wav"},baseUrl:"/mfgj202106/samples/808/"}).toDestination();var te=Object(l.a)({game:J,board:function(e){var t=e.G,a=e.ctx,r=e.moves,c=t.title,i=t.levelTrack,l=t.playerParts,d=t.targetParts,u=t.playerHand,I=t.playerSchedule;Object(s.useEffect)((function(){return z.d.bpm.value=116,z.d.start(),function(){z.d.stop()}}),[]);var R=Object(s.useState)(null),F=Object(O.a)(R,2),T=F[0],p=F[1],b=Object(s.useState)(null),j=Object(O.a)(b,2),G=j[0],m=j[1],f=Object(s.useState)(void 0),y=Object(O.a)(f,2),v=y[0],M=y[1],g=Object(s.useState)(!1),S=Object(O.a)(g,2),H=S[0],w=S[1],D=Object(s.useState)(!0),_=Object(O.a)(D,2),k=_[0],P=_[1];Object(s.useEffect)((function(){if(G!==T&&"undefined"!==typeof v&&null!==T){m(T);var e,t=T%C,a=k?l:d,r=Object(E.a)(a);try{for(r.s();!(e=r.n()).done;){var s=e.value;s.steps[t]!==n.OFF&&ee.triggerAttackRelease($[s.sample],"16n",v,s.steps[t]/2)}}catch(c){r.e(c)}finally{r.f()}return T>=127?(w(!1),M(void 0),void p(null)):void 0}}),[v,l,d,T,G,k]);var A=function(e,t){M(e),p(t)},Z=function(){if(!H){var e=new z.c(A,Object(h.range)(128),"16n"),t=new z.a(i,(function(){w(!0),z.e(),e.loop=!1,e.start()})).toDestination();t.loop=!1,t.autostart=!0}};return Object(x.jsxs)(o.a,{container:!0,className:"game-board",alignItems:"center",justify:"center",children:[Object(x.jsx)(K,{turn:a.turn,onDismiss:function(){P(!1),Z()}}),Object(x.jsx)(o.a,{item:!0,xs:12,className:"title",children:Object(x.jsxs)("h1",{children:[a.turn,": ",c]})},"title"),Object(x.jsxs)(o.a,{container:!0,className:"parts",justify:"center",children:[Object(x.jsxs)(o.a,{item:!0,xs:1,className:"current-parts",children:[Object(x.jsx)(L,{parts:l,currentlyPlayingStep:k?T:null,className:"sampler player"}),Object(x.jsx)(N.a,{variant:"contained",disabled:k,onClick:function(){P(!0),Z()},children:"Current"})]}),Object(x.jsxs)(o.a,{item:!0,xs:1,className:"target-parts",children:[Object(x.jsx)(L,{parts:d,currentlyPlayingStep:k?null:T,className:"sampler player"}),Object(x.jsx)(N.a,{variant:"contained",disabled:!k,onClick:function(){P(!1),Z()},children:"Target"})]})]},"parts"),Object(x.jsxs)(o.a,{item:!0,xs:6,className:"hand-area",children:[Object(x.jsx)("h1",{children:"To-Do"}),Object(x.jsx)(W,{cards:u,onClickCard:function(e){r.playCard(e),Z()},buttonLabel:"Enqueue",className:"hand",unremovable:0})]},"hand-area"),Object(x.jsxs)(o.a,{item:!0,xs:6,className:"schedule-area",children:[Object(x.jsx)("h1",{children:"Schedule"}),Object(x.jsx)(W,{cards:I,onClickCard:function(e){r.removeCard(e),Z()},buttonLabel:"Remove",className:"schedule",unremovable:t.startingSchedule.length})]},"schedule-area"),Object(x.jsx)(o.a,{item:!0,xs:12,className:"next-day",children:Object(x.jsx)(Q,{G:t,onClick:r.commitSchedule})},"next-day")]})},numPlayers:1,debug:!1}),ae=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,181)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};i.a.render(Object(x.jsx)(te,{}),document.getElementById("root")),ae()}},[[150,1,2]]]);
//# sourceMappingURL=main.5d70fac2.chunk.js.map