(this.webpackJsonpmfgj202106=this.webpackJsonpmfgj202106||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){},144:function(e,t){},147:function(e,t,a){"use strict";a.r(t);var n,r,s=a(8),c=a(28),E=a.n(c),i=(a(104),a(105),a(91)),l=a(16),O=a(14),N=a(170),o=a(171),d=a(4),u=a(21),R=a(167),I=a(168),F=a(169),T=a(173),h=a(32),p=a(0),b=a(1),j=a(13),C=16;!function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON",e[e.ACCENT=2]="ACCENT"}(n||(n={})),function(e){e[e.INCREMENT=0]="INCREMENT",e[e.DECREMENT=1]="DECREMENT",e[e.ZERO=2]="ZERO",e[e.MAX=3]="MAX",e[e.SHIFT_UP=4]="SHIFT_UP",e[e.SHIFT_RIGHT=5]="SHIFT_RIGHT",e[e.SHIFT_DOWN=6]="SHIFT_DOWN",e[e.SHIFT_LEFT=7]="SHIFT_LEFT",e[e.IGNORE=8]="IGNORE"}(r||(r={}));var G=function(e,t){var a,s=Object(j.a)(t.steps),c=Object(l.a)(e.entries());try{var E=function(){var e=Object(O.a)(a.value,2),c=e[0],E=e[1];s[c]=function(){var e=t.steps[c];switch(E){case r.INCREMENT:return e===n.OFF?n.ON:n.ACCENT;case r.DECREMENT:return e===n.ACCENT?n.ON:n.OFF;case r.MAX:return n.ACCENT;case r.ZERO:return n.OFF;case r.SHIFT_UP:return c+4>C?n.OFF:t.steps[c+4];case r.SHIFT_RIGHT:return c%4===0?n.OFF:t.steps[c-1];case r.SHIFT_DOWN:return c-4<0?n.OFF:t.steps[c-4];case r.SHIFT_LEFT:return c%4+1===4?n.OFF:t.steps[c+1];default:return e}}()};for(c.s();!(a=c.n()).done;)E()}catch(i){c.e(i)}finally{c.f()}t.steps=s},m=function(){function e(t,a,n){Object(p.a)(this,e),this.title=void 0,this.description=void 0,this.image=void 0,this.sampleTarget=void 0,this.pattern=void 0,this.title=t.title,this.description=t.description,this.image=t.image,this.pattern=a,this.sampleTarget=n}return Object(b.a)(e,[{key:"playCard",value:function(e){var t,a=Object(l.a)(e.playerParts);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.sample===this.sampleTarget&&(this.pattern&&G(this.pattern,n))}}catch(r){a.e(r)}finally{a.f()}}}]),e}(),f={layFlat:new m({title:"Lay Flat",description:"Lay your shirt flat on your bed. The foundation of any laundry folding routine."},[r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE],"sd"),fold:new m({title:"Fold",description:"Fold your shirt. Add some complexity! (Assuming you have something to start with...)"},[r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE],"sd"),drop:new m({title:"Drop",description:"Oops! You dropped your [?] all over the floor. What a mess..."},[r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT],"bd"),mop:new m({title:"Mop",description:"Mop the floor. This mess might be a bit too much to soak up though."},[r.DECREMENT,r.DECREMENT,r.IGNORE,r.DECREMENT,r.DECREMENT,r.DECREMENT,r.IGNORE,r.DECREMENT,r.DECREMENT,r.DECREMENT,r.IGNORE,r.DECREMENT,r.DECREMENT,r.DECREMENT,r.IGNORE,r.DECREMENT],"bd"),sweep:new m({title:"Sweep",description:"Sweep the floor. It's a bit hard to reach that corner."},[r.ZERO,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.ZERO,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.ZERO,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.ZERO,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.SHIFT_RIGHT],"bd"),vacuum:new m({title:"Vacuum",description:"Suck up whatever is left. (Maybe leave 4 [?]s on the floor?)"},[r.INCREMENT,r.IGNORE,r.IGNORE,r.DECREMENT,r.INCREMENT,r.IGNORE,r.IGNORE,r.DECREMENT,r.INCREMENT,r.IGNORE,r.IGNORE,r.DECREMENT,r.INCREMENT,r.IGNORE,r.IGNORE,r.DECREMENT],"bd"),feast:new m({title:"Feast",description:"What a delicious meal! What are we going to do about all the dishes?"},[r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT],"ch"),bus:new m({title:"Bus",description:"What a delicious meal! What are we going to do about all the dishes?"},[r.SHIFT_LEFT,r.SHIFT_LEFT,r.SHIFT_LEFT,r.ZERO,r.SHIFT_LEFT,r.SHIFT_LEFT,r.SHIFT_LEFT,r.ZERO,r.SHIFT_LEFT,r.SHIFT_LEFT,r.SHIFT_LEFT,r.ZERO,r.SHIFT_LEFT,r.SHIFT_LEFT,r.SHIFT_LEFT,r.ZERO],"ch"),rinse:new m({title:"Rinse",description:"Rinse the dishes. This will make them easier to clean."},[r.IGNORE,r.ZERO,r.IGNORE,r.IGNORE,r.IGNORE,r.ZERO,r.IGNORE,r.IGNORE,r.IGNORE,r.ZERO,r.IGNORE,r.IGNORE,r.IGNORE,r.ZERO,r.IGNORE,r.IGNORE],"ch"),scour:new m({title:"Scour",description:"Scour the dishes. Really put your back into it."},[r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE],"ch"),dry:new m({title:"Dry",description:"Let the dishes dry. What a lovely sight!"},[r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE],"ch"),laundry:new m({title:"Laundry",description:"Do the laundry. You know how!"},[r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE],"sd"),floor:new m({title:"Floor",description:"Clean the floor. You know how!"},[r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE],"bd"),dishes:new m({title:"Dishes",description:"Do the dishes. You know how!"},[r.INCREMENT,r.IGNORE,r.MAX,r.IGNORE,r.INCREMENT,r.IGNORE,r.MAX,r.IGNORE,r.INCREMENT,r.IGNORE,r.MAX,r.IGNORE,r.INCREMENT,r.IGNORE,r.MAX,r.IGNORE],"ch")},y=a(92),v=a(165),M=a(172),g=a(166),S=a(15),H=["classSequence"],x=["parts","currentlyPlayingStep"],w=["parts","currentlyPlayingStep"];function D(e){var t=e.classSequence,a=(Object(u.a)(e,H),Object(h.chunk)(t,4));return Object(S.jsx)(S.Fragment,{children:a.map((function(e,t){return Object(S.jsx)("tr",{className:"row",children:e.map((function(e,t){return Object(S.jsx)("td",{className:e,children:Object(S.jsx)(y.a,{className:"step",variant:"outlined"})},"col "+t)}))},"row "+t)}))})}function _(e){var t=e.parts,a=e.currentlyPlayingStep,r=Object(u.a)(e,x),c=Object(s.useState)(0),E=Object(O.a)(c,2),i=E[0],l=E[1],N=t[i].steps,o=Object(h.take)(N,C).map((function(e,t){var r="cell ";return r+=n[e]+" ",null!==a&&t===a%C&&(r+="playing"),r}));return Object(s.createElement)("table",Object(d.a)(Object(d.a)({},r),{},{key:i}),Object(S.jsx)("caption",{children:Object(S.jsx)(v.a,{position:"relative",children:Object(S.jsx)(M.a,{variant:"fullWidth",value:i,onChange:function(e,t){return l(t)},className:"part-selector",children:t.map((function(e,t){return Object(S.jsx)(g.a,{label:e.sample,style:{minWidth:48}},"tab "+t)}))})})}),Object(S.jsx)("tbody",{children:Object(S.jsx)(D,{classSequence:o})}))}function k(e){var t=e.parts,a=e.currentlyPlayingStep,n=Object(u.a)(e,w);return Object(S.jsx)(S.Fragment,{children:Object(S.jsx)(_,Object(d.a)({parts:t,currentlyPlayingStep:a},n))})}var L=["cards","buttonLabel","onClickCard","unremovable"];function A(e){var t,a=e.cardId,n=e.cardIndex,s=e.buttonLabel,c=e.onClickCard,E=f[a],i=null===(t=E.pattern)||void 0===t?void 0:t.map((function(e){return"cell "+r[e]}));return Object(S.jsxs)(R.a,{variant:"outlined",className:"card",children:[Object(S.jsxs)(I.a,{children:[Object(S.jsx)("h2",{children:E.title}),E.sampleTarget&&Object(S.jsx)("span",{children:E.sampleTarget}),i&&Object(S.jsx)("table",{className:"pattern",children:Object(S.jsx)("tbody",{children:Object(S.jsx)(D,{classSequence:i})})}),Object(S.jsx)("p",{children:E.description})]}),Object(S.jsx)(F.a,{children:Object(S.jsx)(N.a,{variant:"contained",onClick:function(){return c(n)},disabled:!c,children:s})})]})}function P(){return Object(S.jsx)(R.a,{variant:"outlined",className:"card empty",children:Object(S.jsx)(I.a,{children:"\xa0"})})}function Z(e){var t=e.cards,a=e.buttonLabel,n=e.onClickCard,r=e.unremovable,s=Object(u.a)(e,L);return Object(S.jsxs)(o.a,Object(d.a)(Object(d.a)({container:!0},s),{},{children:[t.map((function(e,t){return Object(S.jsx)(T.a,{in:!0,children:Object(S.jsx)("div",{children:Object(S.jsx)(A,{cardId:e,cardIndex:t,buttonLabel:a,onClickCard:t>=r?n:void 0},"actionCard "+t)})},"transition "+t)})),Object(h.times)(6-t.length,(function(){return null})).map((function(e,a){return Object(S.jsx)(T.a,{in:!0,children:Object(S.jsx)("div",{children:Object(S.jsx)(P,{},t.length+a)})},"transition "+(t.length+a))}))]}))}var W="/mfgj202106/samples/levels/",X=[{title:"The Laundry",description:["laundry laundry laundry","laundry laundry"],levelTrack:"".concat(W,"dummy116bpm.ogg"),targetParts:[{sample:"sd",steps:[n.OFF,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF]}],startingHand:["layFlat","fold"],startingSchedule:[]},{title:"The Floor",description:["floor sweepy sweepy floor","sweepy sweepy floor floor"],levelTrack:"".concat(W,"dummy116bpm.ogg"),targetParts:[{sample:"bd",steps:[n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF]}],startingHand:["mop","sweep","vacuum"],startingSchedule:["drop"]},{title:"The Dishes",description:["dishy dishy wishy wash","washa dishy dish dish"],levelTrack:"".concat(W,"dummy116bpm.ogg"),targetParts:[{sample:"ch",steps:[n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF]}],startingHand:["bus","rinse","scour","dry"],startingSchedule:["feast"]},{title:"Putting it All Together",description:["every every thing thing","all at once"],levelTrack:"".concat(W,"dummy116bpm.ogg"),targetParts:[{sample:"sd",steps:[n.OFF,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF]},{sample:"bd",steps:[n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF]},{sample:"ch",steps:[n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF]}],startingHand:["laundry","floor","dishes"],startingSchedule:[]}],B=a(10),q=function(e){var t,a,r=X[e-1],s=r.targetParts.map((function(e){return{sample:e.sample,steps:Array.from({length:C},(function(){return n.OFF}))}})),c=Object(d.a)(Object(d.a)({},r),{},{playerParts:s,playerHand:Object(j.a)(r.startingHand),playerSchedule:Object(j.a)(null!==(t=r.startingSchedule)&&void 0!==t?t:[])});return(null!==(a=r.startingSchedule)&&void 0!==a?a:[]).forEach((function(e){return f[e].playCard(c)})),c},U=function(e){var t,a=Object(l.a)(e.targetParts.entries());try{for(a.s();!(t=a.n()).done;)for(var n=Object(O.a)(t.value,2),r=n[0],s=n[1],c=e.playerParts[r],E=0;E<C;E++)if(c.steps[E]!==s.steps[E])return!1}catch(i){a.e(i)}finally{a.f()}return!0},Y={moves:{playCard:function(e,t,a){var n=e.playerHand[a];f[n].playCard(e),e.playerHand.splice(a,1),e.playerSchedule.push(n)},removeCard:function(e,t,a){if(a<e.startingSchedule.length)return B.x;var n=q(t.turn);n.playerHand=Object(j.a)(e.playerHand);var r=e.playerSchedule[a];n.playerHand.push(r);var s,c=Object(l.a)(e.playerSchedule.entries());try{for(c.s();!(s=c.n()).done;){var E=Object(O.a)(s.value,2),i=E[0],N=E[1];if(!(i===a||i<e.startingSchedule.length)){var o=f[N];console.log(n),o.playCard(n),console.log(n),n.playerSchedule.push(N)}}}catch(d){c.e(d)}finally{c.f()}return n},commitSchedule:function(e,t){var a,n;U(e)&&(null===(a=t.events)||void 0===a||null===(n=a.endTurn)||void 0===n||n.call(a))}},turn:{onBegin:function(e,t){return q(t.turn)}}},J=a(31);function V(e){var t=e.G,a=e.onClick,n=U(t);return Object(S.jsx)(N.a,{variant:"contained",onClick:a,disabled:!n,children:"Next Day"})}var z={bd:"e4",ch:"d4",sd:"c4"},K=new J.b({urls:{e4:"BD/E808_BD[short]-03.wav",d4:"CH/E808_CH-06.wav",c4:"SD/E808_SD-03.wav"},baseUrl:"/mfgj202106/samples/808/"}).toDestination();var Q=Object(i.a)({game:Y,board:function(e){var t=e.G,a=e.ctx,r=e.moves,c=t.title,E=t.levelTrack,i=t.playerParts,d=t.targetParts,u=t.playerHand,R=t.playerSchedule;Object(s.useEffect)((function(){return J.d.bpm.value=116,J.d.start(),function(){J.d.stop()}}),[]);var I=Object(s.useState)(null),F=Object(O.a)(I,2),T=F[0],p=F[1],b=Object(s.useState)(null),j=Object(O.a)(b,2),G=j[0],m=j[1],f=Object(s.useState)(void 0),y=Object(O.a)(f,2),v=y[0],M=y[1],g=Object(s.useState)(!1),H=Object(O.a)(g,2),x=H[0],w=H[1],D=Object(s.useState)(!0),_=Object(O.a)(D,2),L=_[0],A=_[1];Object(s.useEffect)((function(){if(G!==T&&"undefined"!==typeof v&&null!==T){console.log(T),m(T);var e,t=T%C,a=L?i:d,r=Object(l.a)(a);try{for(r.s();!(e=r.n()).done;){var s=e.value;s.steps[t]!==n.OFF&&K.triggerAttackRelease(z[s.sample],"16n",v,s.steps[t]/2)}}catch(c){r.e(c)}finally{r.f()}return T>=127?(w(!1),M(void 0),void p(null)):void 0}}),[v,i,d,T,G,L]);var P=function(e,t){M(e),p(t)},W=function(){if(!x){var e=new J.c(P,Object(h.range)(128),"16n"),t=new J.a(E,(function(){w(!0),J.e(),e.loop=!1,e.start()})).toDestination();t.loop=!1,t.autostart=!0}};return Object(S.jsxs)(o.a,{container:!0,children:[Object(S.jsx)(o.a,{item:!0,xs:12,className:"level-title",children:Object(S.jsxs)("h1",{children:[a.turn,": ",c]})}),Object(S.jsxs)(o.a,{item:!0,xs:1,className:"current-parts",children:[Object(S.jsx)(N.a,{variant:"contained",disabled:L,onClick:function(){A(!0),W()},children:"Current"}),Object(S.jsx)(k,{parts:i,currentlyPlayingStep:L?T:null,className:"sampler player"})]}),Object(S.jsxs)(o.a,{item:!0,xs:1,className:"current-parts",children:[Object(S.jsx)(N.a,{variant:"contained",disabled:!L,onClick:function(){A(!1),W()},children:"Target"}),Object(S.jsx)(k,{parts:d,currentlyPlayingStep:L?null:T,className:"sampler player"})]}),Object(S.jsx)(o.a,{item:!0,xs:9}),Object(S.jsxs)(o.a,{item:!0,xs:12,className:"hand-area",children:[Object(S.jsx)("h1",{children:"Hand"}),Object(S.jsx)(Z,{cards:u,onClickCard:function(e){r.playCard(e),W()},buttonLabel:"Enqueue",className:"hand",unremovable:0})]}),Object(S.jsxs)(o.a,{item:!0,xs:12,className:"schedule-area",children:[Object(S.jsxs)("h1",{children:["Schedule \xa0 ",Object(S.jsx)(V,{G:t,onClick:r.commitSchedule})]}),Object(S.jsx)(Z,{cards:R,onClickCard:function(e){r.removeCard(e),W()},buttonLabel:"Remove",className:"schedule",unremovable:t.startingSchedule.length})]})]})},numPlayers:1,debug:!0}),$=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,174)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};E.a.render(Object(S.jsx)(Q,{}),document.getElementById("root")),$()}},[[147,1,2]]]);
//# sourceMappingURL=main.5bdfba00.chunk.js.map