(this.webpackJsonpmfgj202106=this.webpackJsonpmfgj202106||[]).push([[0],{138:function(e,t){},141:function(e,t,a){"use strict";a.r(t);var n,r,s=a(8),E=a.n(s),c=a(32),O=a.n(c),l=(a(98),a(99),a(86)),N=a(160),i=a(164),o=a(4),R=a(21),I=a(161),F=a(162),u=a(163),d=a(37),T=a(0),h=a(1),p=a(14),C=a(16),b=a(13),j=16;!function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON",e[e.ACCENT=2]="ACCENT"}(n||(n={})),function(e){e[e.INCREMENT=0]="INCREMENT",e[e.DECREMENT=1]="DECREMENT",e[e.ZERO=2]="ZERO",e[e.MAX=3]="MAX",e[e.SHIFT_UP=4]="SHIFT_UP",e[e.SHIFT_RIGHT=5]="SHIFT_RIGHT",e[e.SHIFT_DOWN=6]="SHIFT_DOWN",e[e.SHIFT_LEFT=7]="SHIFT_LEFT",e[e.IGNORE=8]="IGNORE"}(r||(r={}));var G=function(e,t){var a,s=Object(b.a)(t.steps),E=Object(C.a)(e.entries());try{var c=function(){var e=Object(p.a)(a.value,2),E=e[0],c=e[1];s[E]=function(){var e=t.steps[E];switch(c){case r.INCREMENT:return e===n.OFF?n.ON:n.ACCENT;case r.DECREMENT:return e===n.ACCENT?n.ON:n.OFF;case r.MAX:return n.ACCENT;case r.ZERO:return n.OFF;case r.SHIFT_UP:return E+4>j?n.OFF:t.steps[E+4];case r.SHIFT_RIGHT:return E%4===0?n.OFF:t.steps[E-1];case r.SHIFT_DOWN:return E-4<0?n.OFF:t.steps[E-4];case r.SHIFT_LEFT:return E%4+1===4?n.OFF:t.steps[E+1];default:return e}}()};for(E.s();!(a=E.n()).done;)c()}catch(O){E.e(O)}finally{E.f()}t.steps=s},m=function(){function e(t,a,n){Object(T.a)(this,e),this.title=void 0,this.description=void 0,this.image=void 0,this.sampleTarget=void 0,this.pattern=void 0,this.title=t.title,this.description=t.description,this.image=t.image,this.pattern=a,this.sampleTarget=n}return Object(h.a)(e,[{key:"playCard",value:function(e){var t,a=Object(C.a)(e.playerParts);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.sample===this.sampleTarget&&(console.log(this.pattern),this.pattern&&G(this.pattern,n))}}catch(r){a.e(r)}finally{a.f()}}}]),e}(),v={layFlat:new m({title:"Lay Flat",description:"Lay your shirt flat on your bed. The foundation of any laundry folding routine."},[r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE],"sd"),fold:new m({title:"Fold",description:"Fold your shirt. Add some complexity! (Assuming you have something to start with...)"},[r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE],"sd"),drop:new m({title:"Drop",description:"Oops! You dropped your [?] all over the floor. What a mess..."},[r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT],"bd"),mop:new m({title:"Mop",description:"Mop the floor. This mess might be a bit too much to soak up though."},[r.DECREMENT,r.DECREMENT,r.IGNORE,r.DECREMENT,r.DECREMENT,r.DECREMENT,r.IGNORE,r.DECREMENT,r.DECREMENT,r.DECREMENT,r.IGNORE,r.DECREMENT,r.DECREMENT,r.DECREMENT,r.IGNORE,r.DECREMENT],"bd"),sweep:new m({title:"Sweep",description:"Sweep the floor. It's a bit hard to reach that corner."},[r.ZERO,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.ZERO,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.ZERO,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.ZERO,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.SHIFT_RIGHT],"bd"),vacuum:new m({title:"Vacuum",description:"Suck up whatever is left. (Maybe leave 4 [?]s on the floor?)"},[r.INCREMENT,r.IGNORE,r.IGNORE,r.DECREMENT,r.INCREMENT,r.IGNORE,r.IGNORE,r.DECREMENT,r.INCREMENT,r.IGNORE,r.IGNORE,r.DECREMENT,r.INCREMENT,r.IGNORE,r.IGNORE,r.DECREMENT],"bd"),feast:new m({title:"Feast",description:"What a delicious meal! What are we going to do about all the dishes?"},[r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT],"ch"),bus:new m({title:"Bus",description:"What a delicious meal! What are we going to do about all the dishes?"},[r.SHIFT_LEFT,r.SHIFT_LEFT,r.SHIFT_LEFT,r.ZERO,r.SHIFT_LEFT,r.SHIFT_LEFT,r.SHIFT_LEFT,r.ZERO,r.SHIFT_LEFT,r.SHIFT_LEFT,r.SHIFT_LEFT,r.ZERO,r.SHIFT_LEFT,r.SHIFT_LEFT,r.SHIFT_LEFT,r.ZERO],"ch"),rinse:new m({title:"Rinse",description:"Rinse the dishes. This will make them easier to clean."},[r.IGNORE,r.ZERO,r.IGNORE,r.IGNORE,r.IGNORE,r.ZERO,r.IGNORE,r.IGNORE,r.IGNORE,r.ZERO,r.IGNORE,r.IGNORE,r.IGNORE,r.ZERO,r.IGNORE,r.IGNORE],"ch"),scour:new m({title:"Scour",description:"Scour the dishes. Really put your back into it."},[r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE],"ch"),dry:new m({title:"Dry",description:"Let the dishes dry. What a lovely sight!"},[r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE],"ch"),laundry:new m({title:"Laundry",description:"Do the laundry. You know how!"},[r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE],"sd"),floor:new m({title:"Floor",description:"Clean the floor. You know how!"},[r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE],"bd"),dishes:new m({title:"Dishes",description:"Do the dishes. You know how!"},[r.INCREMENT,r.IGNORE,r.MAX,r.IGNORE,r.INCREMENT,r.IGNORE,r.MAX,r.IGNORE,r.INCREMENT,r.IGNORE,r.MAX,r.IGNORE,r.INCREMENT,r.IGNORE,r.MAX,r.IGNORE],"ch")},f=a(7),M=a.n(f),y=a(12),S=a(29),g=a(87),H=a(158),x=a(165),w=a(159),D=a(15),_=["classSequence"],L=["parts","currentlyPlayingStep"],k=["parts"];function P(e){var t=e.classSequence,a=(Object(R.a)(e,_),Object(d.chunk)(t,4));return Object(D.jsx)(D.Fragment,{children:a.map((function(e,t){return Object(D.jsx)("tr",{className:"row",children:e.map((function(e,t){return Object(D.jsx)("td",{className:e,children:Object(D.jsx)(g.a,{className:"step",variant:"outlined"})},"col "+t)}))},"row "+t)}))})}function A(e){var t=e.parts,a=e.currentlyPlayingStep,r=Object(R.a)(e,L),E=Object(s.useState)(0),c=Object(p.a)(E,2),O=c[0],l=c[1],N=t[O].steps,i=Object(d.take)(N,j).map((function(e,t){var r="cell ";return r+=n[e]+" ",t===a&&(r+="playing"),r}));return Object(s.createElement)("table",Object(o.a)(Object(o.a)({},r),{},{key:O}),Object(D.jsx)("caption",{children:Object(D.jsx)(H.a,{position:"relative",children:Object(D.jsx)(x.a,{variant:"fullWidth",value:O,onChange:function(e,t){return l(t)},className:"part-selector",children:t.map((function(e,t){return Object(D.jsx)(w.a,{label:e.sample,style:{minWidth:48}},"tab "+t)}))})})}),Object(D.jsx)("tbody",{children:Object(D.jsx)(P,{classSequence:i})}))}var Z={bd:"e4",ch:"d4",sd:"c4"},W=new S.a({urls:{e4:"BD/E808_BD[short]-03.wav",d4:"CH/E808_CH-06.wav",c4:"SD/E808_SD-03.wav"},baseUrl:"/mfgj202106/samples/808/"}).toDestination();function X(e){var t=e.parts,a=Object(R.a)(e,k);Object(s.useEffect)((function(){return S.c.bpm.value=79,S.c.start(),function(){S.c.stop()}}),[]);var r=Object(s.useState)(null),E=Object(p.a)(r,2),c=E[0],O=E[1],l=Object(s.useState)(!1),i=Object(p.a)(l,2),I=i[0],F=i[1],u=function(){var e=Object(y.a)(M.a.mark((function e(){var a;return M.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new S.b((function(e,a){if(a>=j)return O(null),void F(!1);O(a);var r,s=Object(C.a)(t);try{for(s.s();!(r=s.n()).done;){var E=r.value;E.steps[a]!==n.OFF&&W.triggerAttackRelease(Z[E.sample],"16n",e,E.steps[a]/2)}}catch(c){s.e(c)}finally{s.f()}}),Object(d.range)(17),"16n"),F(!0),S.d(),a.loop=!1,a.start();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(D.jsxs)(D.Fragment,{children:[Object(D.jsx)(A,Object(o.a)({parts:t,currentlyPlayingStep:c},a)),Object(D.jsx)(N.a,{variant:"contained",onClick:u,disabled:I,children:I?"Playing":"Play"})]})}var B=["cards","buttonLabel","onClickCard","unremovable"];function q(e){var t,a=e.cardId,n=e.cardIndex,s=e.buttonLabel,E=e.onClickCard,c=v[a],O=null===(t=c.pattern)||void 0===t?void 0:t.map((function(e){return"cell "+r[e]}));return Object(D.jsxs)(I.a,{variant:"outlined",className:"card",children:[Object(D.jsxs)(F.a,{children:[Object(D.jsx)("h2",{children:c.title}),c.sampleTarget&&Object(D.jsx)("span",{children:c.sampleTarget}),O&&Object(D.jsx)("table",{className:"pattern",children:Object(D.jsx)(P,{classSequence:O})}),Object(D.jsx)("p",{children:c.description})]}),Object(D.jsx)(u.a,{children:Object(D.jsx)(N.a,{variant:"contained",onClick:function(){return E(n)},disabled:!E,children:s})})]})}function U(){return Object(D.jsx)(I.a,{variant:"outlined",className:"card empty",children:Object(D.jsx)(F.a,{children:"\xa0"})})}function Y(e){var t=e.cards,a=e.buttonLabel,n=e.onClickCard,r=e.unremovable,s=Object(R.a)(e,B);return Object(D.jsxs)(i.a,Object(o.a)(Object(o.a)({container:!0},s),{},{children:[t.map((function(e,t){return Object(D.jsx)(q,{cardId:e,cardIndex:t,buttonLabel:a,onClickCard:t>=r?n:void 0},t)})),Object(d.times)(6-t.length,(function(){return null})).map((function(e,a){return Object(D.jsx)(U,{},t.length+a)}))]}))}var J=[{title:"The Laundry",targetParts:[{sample:"sd",steps:[n.OFF,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF]}],startingHand:["layFlat","fold"]},{title:"The Floor",targetParts:[{sample:"bd",steps:[n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF]}],startingHand:["mop","sweep","vacuum"],playerSchedule:["drop"]},{title:"The Dishes",targetParts:[{sample:"ch",steps:[n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF]}],startingHand:["bus","rinse","scour","dry"],playerSchedule:["feast"]},{title:"Putting it All Together",targetParts:[{sample:"sd",steps:[n.OFF,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF]},{sample:"bd",steps:[n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF]},{sample:"ch",steps:[n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF]}],startingHand:["laundry","floor","dishes"]}],V=a(10),z=function(e){var t,a,r,s,E=J[e-1],c=E.targetParts.map((function(e){return{sample:e.sample,steps:Array.from({length:j},(function(){return n.OFF}))}})),O={levelTitle:E.title,playerParts:c,targetParts:Object(b.a)(E.targetParts),playerHand:Object(b.a)(E.startingHand),playerSchedule:Object(b.a)(null!==(t=E.playerSchedule)&&void 0!==t?t:[]),activePart:null,unremovable:null!==(a=null===(r=E.playerSchedule)||void 0===r?void 0:r.length)&&void 0!==a?a:0};return(null!==(s=E.playerSchedule)&&void 0!==s?s:[]).forEach((function(e){return v[e].playCard(O)})),O},K=function(e){var t,a=Object(C.a)(e.targetParts.entries());try{for(a.s();!(t=a.n()).done;)for(var n=Object(p.a)(t.value,2),r=n[0],s=n[1],E=e.playerParts[r],c=0;c<j;c++)if(E.steps[c]!==s.steps[c])return!1}catch(O){a.e(O)}finally{a.f()}return!0},Q={moves:{playCard:function(e,t,a){var n=e.playerHand[a];v[n].playCard(e),e.playerHand.splice(a,1),e.playerSchedule.push(n)},removeCard:function(e,t,a){if(a<e.unremovable)return V.x;var n=z(t.turn);n.playerHand=Object(b.a)(e.playerHand);var r=e.playerSchedule[a];n.playerHand.push(r);var s,E=Object(C.a)(e.playerSchedule.entries());try{for(E.s();!(s=E.n()).done;){var c=Object(p.a)(s.value,2),O=c[0],l=c[1];if(!(O===a||O<e.unremovable)){var N=v[l];console.log(n),N.playCard(n),console.log(n),n.playerSchedule.push(l)}}}catch(i){E.e(i)}finally{E.f()}return n},commitSchedule:function(e,t){var a,n;K(e)&&(null===(a=t.events)||void 0===a||null===(n=a.endTurn)||void 0===n||n.call(a))}},turn:{onBegin:function(e,t){return z(t.turn)}}};function $(e){var t=e.G,a=e.onClick,n=K(t);return Object(D.jsx)(N.a,{variant:"contained",onClick:a,disabled:!n,children:"Next Day"})}var ee=Object(l.a)({game:Q,board:function(e){var t=e.G,a=e.ctx,n=e.moves,r=t.playerParts,s=t.targetParts,E=t.unremovable;return Object(D.jsxs)(i.a,{container:!0,children:[Object(D.jsx)(i.a,{item:!0,xs:12,className:"level-title",children:Object(D.jsxs)("h1",{children:[a.turn,": ",t.levelTitle]})}),Object(D.jsxs)(i.a,{item:!0,xs:1,className:"current-parts",children:[Object(D.jsx)("h1",{children:"Current"}),Object(D.jsx)(X,{parts:r,className:"sampler player"})]}),Object(D.jsxs)(i.a,{item:!0,xs:1,className:"target-parts",children:[Object(D.jsx)("h1",{children:"Goal"}),Object(D.jsx)(X,{parts:s,className:"sampler goal"})]}),Object(D.jsx)(i.a,{item:!0,xs:1,className:"continue"}),Object(D.jsx)(i.a,{item:!0,xs:9}),Object(D.jsxs)(i.a,{item:!0,xs:12,className:"hand-area",children:[Object(D.jsx)("h1",{children:"Hand"}),Object(D.jsx)(Y,{cards:t.playerHand,onClickCard:n.playCard,buttonLabel:"Enqueue",className:"hand",unremovable:0})]}),Object(D.jsxs)(i.a,{item:!0,xs:12,className:"schedule-area",children:[Object(D.jsxs)("h1",{children:["Schedule \xa0 ",Object(D.jsx)($,{G:t,onClick:n.commitSchedule})]}),Object(D.jsx)(Y,{cards:t.playerSchedule,onClickCard:n.removeCard,buttonLabel:"Remove",className:"schedule",unremovable:E})]})]})},numPlayers:1,debug:!0}),te=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,167)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,E=t.getTTFB;a(e),n(e),r(e),s(e),E(e)}))};O.a.render(Object(D.jsx)(E.a.StrictMode,{children:Object(D.jsx)(ee,{})}),document.getElementById("root")),te()},98:function(e,t,a){},99:function(e,t,a){}},[[141,1,2]]]);
//# sourceMappingURL=main.8083d64f.chunk.js.map