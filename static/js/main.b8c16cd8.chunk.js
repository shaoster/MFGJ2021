(this.webpackJsonpmfgj202106=this.webpackJsonpmfgj202106||[]).push([[0],{164:function(e,t,a){},165:function(e,t,a){},308:function(e,t){},311:function(e,t,a){"use strict";a.r(t);var n,r,s=a(5),c=a(25),i=a.n(c),l=(a(164),a(165),a(154)),O=a(16),o=a(15),d=a(337),u=a(339),E=a(21),N=a(4),F=a(334),I=a(335),h=a(336),R=a(36),b=a(344),T=a(343),p=a(0),j=a(1),G=a(14),m=16,C=60/352;!function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON",e[e.ACCENT=2]="ACCENT"}(n||(n={})),function(e){e[e.INCREMENT=0]="INCREMENT",e[e.DECREMENT=1]="DECREMENT",e[e.ZERO=2]="ZERO",e[e.MAX=3]="MAX",e[e.SHIFT_UP=4]="SHIFT_UP",e[e.SHIFT_RIGHT=5]="SHIFT_RIGHT",e[e.SHIFT_DOWN=6]="SHIFT_DOWN",e[e.SHIFT_LEFT=7]="SHIFT_LEFT",e[e.IGNORE=8]="IGNORE"}(r||(r={}));var f=function(e,t){var a,s=Object(G.a)(t.steps),c=Object(O.a)(e.entries());try{var i=function(){var e=Object(o.a)(a.value,2),c=e[0],i=e[1];s[c]=function(){var e=t.steps[c];switch(i){case r.INCREMENT:return e===n.OFF?n.ON:n.ACCENT;case r.DECREMENT:return e===n.ACCENT?n.ON:n.OFF;case r.MAX:return n.ACCENT;case r.ZERO:return n.OFF;case r.SHIFT_UP:return c+4>m?n.OFF:t.steps[c+4];case r.SHIFT_RIGHT:return c%4===0?n.OFF:t.steps[c-1];case r.SHIFT_DOWN:return c-4<0?n.OFF:t.steps[c-4];case r.SHIFT_LEFT:return c%4+1===4?n.OFF:t.steps[c+1];default:return e}}()};for(c.s();!(a=c.n()).done;)i()}catch(l){c.e(l)}finally{c.f()}t.steps=s},v=function(){function e(t,a,n){Object(p.a)(this,e),this.title=void 0,this.description=void 0,this.image=void 0,this.sampleTarget=void 0,this.pattern=void 0,this.title=t.title,this.description=t.description,this.image=t.image,this.pattern=a,this.sampleTarget=n}return Object(j.a)(e,[{key:"playCard",value:function(e){var t,a=Object(O.a)(e.playerParts);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.sample===this.sampleTarget&&(this.pattern&&f(this.pattern,n))}}catch(r){a.e(r)}finally{a.f()}}}]),e}(),g={makeBed:new v({title:"Make Bed",description:"If you make your bed every morning, you will have accomplished the first task of the day."},[r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE],"bd"),cleanChest:new v({title:"Clean Chest",description:"Next to the bed is a small chest for your personal belongings. It's a bit dusty."},[r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE],"bd"),layFlat:new v({title:"Lay Flat",description:"Lay your shirt flat on your bed. The foundation of any laundry folding routine."},[r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE],"sd"),fold:new v({title:"Fold",description:"Fold your shirt. Add some complexity! (Assuming you have something to start with...)"},[r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE],"sd"),putAway:new v({title:"Put Away",description:"Put away your freshly folded clothes."},[r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.MAX,r.IGNORE,r.IGNORE,r.IGNORE],"sd"),drop:new v({title:"The Mess",description:"Oops! You dropped your [?] all over the floor. What a mess..."},[r.MAX,r.MAX,r.MAX,r.MAX,r.MAX,r.MAX,r.MAX,r.MAX,r.MAX,r.MAX,r.MAX,r.MAX,r.MAX,r.MAX,r.MAX,r.MAX],"bd"),mop:new v({title:"Mop",description:"Mop the floor. This mess might be a bit too much to soak up though."},[r.IGNORE,r.IGNORE,r.DECREMENT,r.DECREMENT,r.IGNORE,r.IGNORE,r.DECREMENT,r.DECREMENT,r.IGNORE,r.IGNORE,r.DECREMENT,r.DECREMENT,r.IGNORE,r.IGNORE,r.DECREMENT,r.DECREMENT],"bd"),sweep:new v({title:"Sweep",description:"Sweep the floor. It's a bit hard to get the corners though.."},[r.IGNORE,r.IGNORE,r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.DECREMENT,r.DECREMENT,r.IGNORE,r.IGNORE,r.DECREMENT,r.DECREMENT,r.IGNORE,r.IGNORE,r.DECREMENT,r.IGNORE],"bd"),vacuum:new v({title:"Vacuum",description:"Suck up whatever is left."},[r.IGNORE,r.IGNORE,r.IGNORE,r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.DECREMENT],"bd"),emptyTrash:new v({title:"Empty Trash",description:"Those bins were chalk full of [???]! Much better now..."},[r.IGNORE,r.ZERO,r.IGNORE,r.IGNORE,r.IGNORE,r.ZERO,r.IGNORE,r.IGNORE,r.IGNORE,r.ZERO,r.IGNORE,r.IGNORE,r.IGNORE,r.ZERO,r.IGNORE,r.IGNORE],"bd"),feast:new v({title:"Feast",description:"What a delicious meal! What are we going to do about all the dishes?"},[r.INCREMENT,r.INCREMENT,r.IGNORE,r.IGNORE,r.INCREMENT,r.INCREMENT,r.IGNORE,r.MAX,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.MAX,r.IGNORE,r.MAX,r.MAX],"ch"),rearrange:new v({title:"Rearrange",description:"All the chairs and tables have been moved away from their original places!"},[r.SHIFT_LEFT,r.SHIFT_UP,r.SHIFT_LEFT,r.SHIFT_UP,r.SHIFT_DOWN,r.SHIFT_UP,r.SHIFT_DOWN,r.SHIFT_UP,r.SHIFT_DOWN,r.SHIFT_UP,r.SHIFT_DOWN,r.SHIFT_UP,r.SHIFT_DOWN,r.SHIFT_RIGHT,r.SHIFT_DOWN,r.SHIFT_RIGHT],"ch"),bus:new v({title:"Bus",description:"What a delicious meal! What are we going to do about all the dishes?"},[r.SHIFT_LEFT,r.SHIFT_LEFT,r.SHIFT_LEFT,r.SHIFT_UP,r.SHIFT_DOWN,r.IGNORE,r.IGNORE,r.SHIFT_UP,r.SHIFT_DOWN,r.IGNORE,r.IGNORE,r.SHIFT_UP,r.SHIFT_DOWN,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.SHIFT_RIGHT],"ch"),rinse:new v({title:"Rinse",description:"Rinse the dishes. This will make them easier to clean."},[r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.SHIFT_LEFT,r.SHIFT_UP,r.SHIFT_LEFT,r.SHIFT_UP,r.SHIFT_DOWN,r.SHIFT_RIGHT,r.SHIFT_DOWN,r.SHIFT_RIGHT,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE],"ch"),scour:new v({title:"Scour",description:"Scour the dishes. Really put your back into it."},[r.SHIFT_LEFT,r.SHIFT_RIGHT,r.SHIFT_LEFT,r.SHIFT_RIGHT,r.SHIFT_LEFT,r.SHIFT_UP,r.SHIFT_UP,r.SHIFT_RIGHT,r.SHIFT_DOWN,r.SHIFT_RIGHT,r.SHIFT_LEFT,r.SHIFT_DOWN,r.SHIFT_LEFT,r.SHIFT_RIGHT,r.SHIFT_LEFT,r.SHIFT_RIGHT],"ch"),dry:new v({title:"Dry",description:"Let the dishes dry. What a lovely sight!"},[r.SHIFT_LEFT,r.SHIFT_RIGHT,r.SHIFT_LEFT,r.SHIFT_RIGHT,r.SHIFT_LEFT,r.SHIFT_RIGHT,r.SHIFT_LEFT,r.SHIFT_RIGHT,r.SHIFT_LEFT,r.SHIFT_RIGHT,r.SHIFT_LEFT,r.SHIFT_RIGHT,r.SHIFT_LEFT,r.SHIFT_RIGHT,r.SHIFT_LEFT,r.SHIFT_RIGHT],"ch"),laundry:new v({title:"Laundry",description:"Do the laundry. You know how!"},[r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.MAX,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.MAX,r.IGNORE,r.IGNORE,r.IGNORE],"sd"),floor:new v({title:"Floor",description:"Clean the floor. You know how!"},[r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE],"bd"),dishes:new v({title:"Dishes",description:"Do the dishes. You know how!"},[r.INCREMENT,r.IGNORE,r.MAX,r.IGNORE,r.INCREMENT,r.IGNORE,r.MAX,r.IGNORE,r.INCREMENT,r.IGNORE,r.MAX,r.IGNORE,r.INCREMENT,r.IGNORE,r.MAX,r.IGNORE],"ch")},S=a(312),y=a(341),x=a(333),H=a(13),_=["classSequence"],M=["parts","currentlyPlayingStep","tabIndex","setTabIndex"],w=["parts","currentlyPlayingStep","tabIndex","setTabIndex"];function A(e){var t=e.classSequence,a=(Object(E.a)(e,_),Object(R.chunk)(t,4));return Object(H.jsx)(H.Fragment,{children:a.map((function(e,t){return Object(H.jsx)("tr",{className:"row",children:e.map((function(e,t){return Object(H.jsx)("td",{className:e,children:Object(H.jsx)(S.a,{className:"step",variant:"outlined"})},"col "+t)}))},"row "+t)}))})}function k(e){var t=e.parts,a=e.currentlyPlayingStep,r=e.tabIndex,c=e.setTabIndex,i=Object(E.a)(e,M),l=t[r],O=l.steps,o=l.sample,d=Object(R.take)(O,m).map((function(e,t){var r="cell ";return r+=n[e]+" ",null!==a&&t===a%m&&(r+="playing"),r}));return Object(s.createElement)("table",Object(N.a)(Object(N.a)({},i),{},{key:r}),Object(H.jsx)("caption",{children:Object(H.jsx)(y.a,{variant:"fullWidth",value:r,onChange:function(e,t){return c(t)},className:"part-selector",children:t.map((function(e,t){return Object(H.jsx)(x.a,{label:e.sample,style:{minWidth:48}},"tab "+t)}))})}),Object(H.jsx)("tbody",{className:o,children:Object(H.jsx)(A,{classSequence:d})}))}function D(e){var t=e.parts,a=e.currentlyPlayingStep,n=e.tabIndex,r=e.setTabIndex,s=Object(E.a)(e,w);return Object(H.jsx)(H.Fragment,{children:Object(H.jsx)(k,Object(N.a)({parts:t,tabIndex:n,setTabIndex:r,currentlyPlayingStep:a},s))})}var L=["cards","buttonLabel","onClickCard","unremovable","className","emphasizeButton"];function P(e){var t,a=e.cardId,n=e.cardIndex,s=e.buttonLabel,c=e.onClickCard,i=e.onClickEnabled,l=e.viewCard,O=e.isSelected,o=e.emphasizeButton,u=e.leftOffset,E=g[a],N=null===(t=E.pattern)||void 0===t?void 0:t.map((function(e){return"cell "+r[e]}));return Object(H.jsxs)(F.a,{variant:"outlined",className:"card "+E.sampleTarget+(O?" selected":""),onClick:l,style:{marginLeft:u+"px"},children:[Object(H.jsx)(I.a,{children:N&&Object(H.jsx)("table",{className:"pattern",children:Object(H.jsx)("tbody",{children:Object(H.jsx)(A,{classSequence:N})})})}),Object(H.jsx)(h.a,{children:i&&Object(H.jsx)(d.a,{variant:"contained",onClick:function(e){c(n),e.stopPropagation()},disabled:!O,className:o?"emphasis":"",children:s})})]})}var X=function(e,t){switch(t.type){case"enter":return Object(N.a)(Object(N.a)({},e),{},{renderedCardCount:e.renderedCardCount+1});case"exited":return Object(N.a)(Object(N.a)({},e),{},{renderedCardCount:e.renderedCardCount-1});case"select-card":var a=t.value!==e.selectedCard?t.value:t.value<e.cardCount-1?t.value+1:0,n=Object(R.range)(6).map((function(e){return"card-"+function(e){return e<a?"displace":"show"}(e)}));return Object(N.a)(Object(N.a)({},e),{},{cardClasses:n,selectedCard:a});case"reset":return Object(N.a)(Object(N.a)({},t.value),{},{renderedCardCount:e.renderedCardCount});default:throw new Error("Unrecognized action.")}};function W(e){var t=e.cards,a=e.buttonLabel,n=e.onClickCard,r=e.unremovable,c=e.className,i=e.emphasizeButton,l=(Object(E.a)(e,L),Object(R.range)(6).map((function(){return"card-show"}))),O=Object(s.useReducer)(X,{cardCount:t.length,selectedCard:0,cardClasses:l,renderedCardCount:t.length}),d=Object(o.a)(O,2),u=d[0],N=d[1];return Object(s.useEffect)((function(){t.length!==u.cardCount&&N({type:"reset",value:{cardCount:t.length,selectedCard:0,cardClasses:l}})}),[t.length,l,u.cardCount]),Object(H.jsx)("div",{className:"sequence "+c,children:Object(H.jsx)(b.a,{component:null,children:t.map((function(e,s){return Object(H.jsx)(T.a,{enter:!0,exit:!0,classNames:"card",timeout:200,onEnter:function(){return N({type:"enter",value:t.length})},onExited:function(){return N({type:"exited",value:t.length})},children:Object(H.jsx)("div",{className:"card-slot "+u.cardClasses[s],style:{zIndex:6-s},children:Object(H.jsx)(P,{cardId:e,cardIndex:s,buttonLabel:a,onClickCard:function(){return n(s)},onClickEnabled:t.length-s>r,viewCard:function(){N({type:"select-card",value:s})},isSelected:s===u.selectedCard,emphasizeButton:i,leftOffset:18*(6-u.renderedCardCount-1)})})},e)}))})})}var B=a(41),U=a(342),Y="/mfgj202106/samples/levels/",z=[{title:"The Laundry",description:["Hey Neon, are you settled in yet?","I'm [???] and I'm a specialist in [???].","Your training starts today."],levelTrack:"".concat(Y,"unmixed_1_1_88_bpm.ogg"),targetParts:[{sample:"sd",steps:[n.OFF,n.OFF,n.OFF,n.OFF,n.ACCENT,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.ACCENT,n.OFF,n.OFF,n.OFF]}],startingHand:["layFlat","fold","putAway"],startingSchedule:[],hints:["Why don't we get started by doing the laundry?","**PLACE** items from your **To-Do** list on your **Schedule** and get to work!"]},{title:"The Floor",description:["Nice work on that laundry!","Let me introduce you to [???].","We're only just getting started..."],levelTrack:"".concat(Y,"unmixed_1_2_88_bpm.ogg"),targetParts:[{sample:"bd",steps:[n.ACCENT,n.OFF,n.OFF,n.OFF,n.ACCENT,n.OFF,n.OFF,n.OFF,n.ACCENT,n.OFF,n.OFF,n.OFF,n.ACCENT,n.OFF,n.OFF,n.OFF]}],startingHand:["mop","sweep","vacuum","emptyTrash"],startingSchedule:["drop"],hints:["That's a big mess to tidy up!","Just like with music, sometimes what's missing is heard loudest."]},{title:"After Dinner",description:["Everything's right back in its place.","You can head to the mess hall now.","[???] will serve you your dinner."],levelTrack:"".concat(Y,"unmixed_1_3_88_bpm.ogg"),targetParts:[{sample:"ch",steps:[n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF]}],startingHand:["rearrange","bus","rinse","scour","dry"],startingSchedule:["feast"],hints:["You've been working hard! You've arrived just in time for dinner.","Err.. Or rather, just in time for cleaning the tables and dishes from dinner..."]},{title:"Putting it All Together",description:["Wow, all the tables and dishes look great!","You've worked hard.","It's time to meet the master..."],levelTrack:"".concat(Y,"unmixed_1_all_88_bpm.ogg"),overrideTrackBars:12,targetParts:[{sample:"sd",steps:[n.OFF,n.OFF,n.OFF,n.OFF,n.ACCENT,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.ACCENT,n.OFF,n.OFF,n.OFF]},{sample:"bd",steps:[n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF]},{sample:"ch",steps:[n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF]}],startingHand:["laundry","floor","dishes"],startingSchedule:[],hints:["Show me what you've done today!"]},{title:"Day 2",description:["After the tutorial."],levelTrack:"".concat(Y,"unmixed_2_1_112_bpm.ogg"),overrideBPM:112,targetParts:[{sample:"bd",steps:[n.ON,n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.ON,n.OFF,n.ON,n.OFF,n.ON,n.OFF,n.OFF,n.ON,n.OFF]},{sample:"sd",steps:[n.OFF,n.OFF,n.OFF,n.OFF,n.ACCENT,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF]},{sample:"ch",steps:[n.ACCENT,n.ACCENT,n.ACCENT,n.ACCENT,n.OFF,n.ACCENT,n.ON,n.ON,n.ACCENT,n.ON,n.ON,n.ON,n.OFF,n.ON,n.ACCENT,n.ON]}],startingHand:[],startingSchedule:[],hints:["Things are starting to get hard..."]}];function Z(e){var t=e.turn,a=e.onDismiss,n=Object(s.useState)(t),r=Object(o.a)(n,2),c=r[0],i=r[1],l=Object(s.useState)(!0),O=Object(o.a)(l,2),d=O[0],u=O[1];Object(s.useEffect)((function(){t!==c&&u(!0)}),[c,t]);var E=function(){u(!1),i(t),a()},N=z[t-1];return Object(H.jsx)(U.a,{open:d,onClose:E,onClick:E,children:Object(H.jsx)(S.a,{variant:"outlined",className:"event-modal",children:Object(H.jsxs)("div",{className:"event-body",children:[Object(H.jsx)("h1",{children:N.title}),N.description.map((function(e,t){return Object(H.jsx)("p",{children:e},t)})),Object(H.jsx)("p",{children:Object(H.jsx)("em",{children:"Press Escape or click/tap anywhere to continue..."})})]})})})}var q=a(338);function J(e){var t=e.progress,a=e.max;return Object(H.jsx)(q.a,{className:"progress-bar",variant:"determinate",value:100*(null===t?0:t+1)/a})}var V=a(340),K=a(153),Q=a.n(K);function $(e){var t=e.G,a=e.onClick,n=t.hasClearedLevel;return Object(H.jsx)(d.a,{variant:"contained",onClick:a,disabled:!n,className:n?"glow":"",children:"Continue"})}var ee={cy:{pitch:"f4",duration:"2n"},bd:{pitch:"e4",duration:"16n"},ch:{pitch:"d4",duration:"16n"},sd:{pitch:"c4",duration:"16n"}},te=new B.b({urls:{f4:"CY/E808_CY-12[short].ogg",e4:"BD/E808_BD[short]-03.wav",d4:"CH/E808_CH-06.wav",c4:"SD/E808_SD-07.wav"},baseUrl:"/mfgj202106/samples/808/"}).toDestination();var ae=a(11),ne=function(e,t){var a,r,s,c=z[e-1],i=c.targetParts.map((function(e){return{sample:e.sample,steps:Array.from({length:m},(function(){return n.OFF}))}})),l=Object(N.a)(Object(N.a)({},c),{},{playerParts:i,playerHand:Object(G.a)(c.startingHand),playerSchedule:Object(G.a)(null!==(a=c.startingSchedule)&&void 0!==a?a:[]),hasClearedLevel:null!==(r=null===t||void 0===t?void 0:t.hasClearedLevel)&&void 0!==r&&r});return(null!==(s=c.startingSchedule)&&void 0!==s?s:[]).forEach((function(e){return g[e].playCard(l)})),l},re=function(e){var t,a=Object(O.a)(e.targetParts.entries());try{for(a.s();!(t=a.n()).done;)for(var n=Object(o.a)(t.value,2),r=n[0],s=n[1],c=e.playerParts[r],i=0;i<m;i++)if(c.steps[i]!==s.steps[i])return!1}catch(l){a.e(l)}finally{a.f()}return!0},se={moves:{playCard:function(e,t,a){var n=e.playerHand[a],r=g[n];if(!r)return ae.x;r.playCard(e),e.playerHand.splice(a,1),e.playerSchedule.unshift(n),re(e)&&(e.hasClearedLevel=!0)},removeCard:function(e,t,a){if(e.playerSchedule.length-a<=e.startingSchedule.length)return ae.x;var n=e.playerSchedule[a];if(!n)return ae.x;var r=ne(t.turn,e);r.playerHand=Object(G.a)(e.playerHand),r.playerHand.unshift(n);var s=Object(R.reverse)(Object(G.a)(e.playerSchedule));console.log(s);var c,i=Object(O.a)(s.entries());try{for(i.s();!(c=i.n()).done;){var l=Object(o.a)(c.value,2),d=l[0],u=l[1];if(e.playerSchedule.length-d-1!==a)if(!(d<e.startingSchedule.length))g[u].playCard(r),r.playerSchedule.unshift(u)}}catch(E){i.e(E)}finally{i.f()}return re(r)&&(e.hasClearedLevel=!0),r},clearSchedule:function(e,t){return re(e)&&(e.hasClearedLevel=!0),ne(t.turn,e)},commitSchedule:function(e,t){var a,n;e.hasClearedLevel&&(null===(a=t.events)||void 0===a||null===(n=a.endTurn)||void 0===n||n.call(a))}},turn:{onBegin:function(e,t){return ne(t.turn)}}},ce=Object(l.a)({game:se,board:function(e){var t=e.G,a=e.ctx,r=e.moves,c=t.title,i=t.hasClearedLevel,l=t.hints,E=t.levelTrack,N=t.playerParts,F=t.targetParts,I=t.playerHand,h=t.playerSchedule,b=t.startingSchedule,p=t.overrideTrackBars,j=t.overrideBPM,G=null!==p&&void 0!==p?p:4,f=null!==j&&void 0!==j?j:88;Object(s.useEffect)((function(){return B.d.bpm.value=f,B.e(),B.d.start(),function(){B.d.stop()}}),[f]);var v=Object(s.useState)(l),S=Object(o.a)(v,2),y=S[0],x=S[1],_=Object(s.useState)(0),M=Object(o.a)(_,2),w=M[0],A=M[1];Object(s.useEffect)((function(){if(h.length===b.length&&x(l),h.length>0){var e=g[h[0]],t=N.findIndex((function(t){return t.sample===e.sampleTarget}));t>=0&&A(t)}}),[l,N,h,b.length]),Object(s.useEffect)((function(){A(0)}),[a.turn]);var k=Object(s.useState)(null),L=Object(o.a)(k,2),P=L[0],X=L[1],U=Object(s.useState)(null),Y=Object(o.a)(U,2),z=Y[0],q=Y[1],K=Object(s.useState)(void 0),ae=Object(o.a)(K,2),ne=ae[0],re=ae[1],se=Object(s.useState)(!1),ce=Object(o.a)(se,2),ie=ce[0],le=ce[1],Oe=Object(s.useState)(!0),oe=Object(o.a)(Oe,2),de=oe[0],ue=oe[1],Ee=Object(s.useState)(null),Ne=Object(o.a)(Ee,2),Fe=Ne[0],Ie=Ne[1],he=Object(s.useState)(null),Re=Object(o.a)(he,2),be=Re[0],Te=Re[1],pe=function(e,t){re(e),X(t)},je=function(){if(!ie){var e=new B.c(pe,Object(R.range)(m*G+1),"16n");Ge(),Te(e);var t=new B.a(E,(function(){le(!0),B.e(),e.loop=!1,e.start()})).toDestination();Ie(t),t.loop=!1,t.autostart=!0}},Ge=Object(s.useCallback)((function(){ie&&(re(void 0),q(null),X(null),null===be||void 0===be||be.stop(),Te(null),null===Fe||void 0===Fe||Fe.stop(),Ie(null),le(!1),ue(!0))}),[ie,be,Fe]);return Object(s.useEffect)((function(){if(z!==P&&"undefined"!==typeof ne&&null!==P&&ie)if(P>=m*G)Ge();else{q(P);var e,t=P%m,a=de?N:F,r=Object(O.a)(a);try{for(r.s();!(e=r.n()).done;){var s=e.value;s.steps[t]!==n.OFF&&te.triggerAttackRelease(ee[s.sample].pitch,ee[s.sample].duration,ne,s.steps[t]/2)}}catch(c){r.e(c)}finally{r.f()}}}),[ne,N,F,P,z,de,ie,Ge,G]),Object(H.jsxs)(u.a,{container:!0,className:"game-board",alignItems:"center",justify:"center",children:[Object(H.jsx)(Z,{turn:a.turn,onDismiss:function(){ue(!1),je()}},"ld:"+a.turn),Object(H.jsx)(u.a,{item:!0,xs:12,children:Object(H.jsxs)("h1",{children:[a.turn,": ",c]})},"title"),Object(H.jsx)(u.a,{item:!0,xs:3,className:"pc-area portrait-area",children:Object(H.jsx)("div",{className:"pc portrait",children:Object(H.jsx)(d.a,{variant:"contained",disabled:de,className:de?"selected":"",onClick:function(){ue(!0),je()},children:"My Parts"})})},"pc-area"),Object(H.jsxs)(u.a,{item:!0,xs:6,className:"parts-area",children:[Object(H.jsxs)(u.a,{container:!0,className:"parts",justify:"center",children:[Object(H.jsx)(u.a,{item:!0,xs:1,children:ie&&Object(H.jsx)("span",{children:((null!==P&&void 0!==P?P:0)*C).toFixed(1)})},"time-elapsed"),Object(H.jsx)(u.a,{item:!0,xs:10,children:Object(H.jsx)(J,{progress:P,max:G*m})},"progress"),Object(H.jsx)(u.a,{item:!0,xs:1,children:ie&&Object(H.jsx)("span",{children:((G*m-(null!==P&&void 0!==P?P:0))*C).toFixed(1)})},"time-remaining"),Object(H.jsx)(u.a,{item:!0,xs:12,className:"start-stop",children:Object(H.jsx)(d.a,{className:ie?"stop":"play",onClick:ie?Ge:je,children:"\xa0"})},"start-stop"),Object(H.jsx)(u.a,{item:!0,xs:12,className:"current-parts",children:Object(H.jsx)(V.a,{children:Object(H.jsx)(T.a,{timeout:200,classNames:de?"current":"target",children:Object(H.jsx)(D,{parts:de?N:F,currentlyPlayingStep:P,className:"sampler "+(de?"current":"target"),tabIndex:w,setTabIndex:A})},de?"current":"target")})})]},"parts"),Object(H.jsx)(u.a,{item:!0,xs:12,className:"dialogue",children:"undefined"!==typeof y&&Object(H.jsx)("div",{children:Object(H.jsx)(Q.a,{children:y.join("\n\n")})})})]}),Object(H.jsx)(u.a,{item:!0,xs:3,className:"npc-area portrait-area",children:Object(H.jsx)("div",{className:"npc portrait",children:Object(H.jsx)(d.a,{variant:"contained",disabled:!de,className:de?"":"selected",onClick:function(){ue(!1),je()},children:"Goal"})})},"npc-area"),Object(H.jsxs)(u.a,{item:!0,xs:5,className:"hand-area",children:[Object(H.jsx)("div",{className:"label",children:Object(H.jsx)("h3",{children:"To-Do"})}),Object(H.jsx)(W,{cards:I,onClickCard:function(e){r.playCard(e),ue(!0),je(),function(e){var t=g[I[e]];t&&x([t.description])}(e)},buttonLabel:"Place",className:"hand",unremovable:0,emphasizeButton:!i},"hand:"+a.turn)]},"hand-area"),Object(H.jsx)(u.a,{item:!0,xs:2,className:"next-day",children:Object(H.jsxs)(u.a,{container:!0,children:[Object(H.jsx)(u.a,{item:!0,xs:12,children:Object(H.jsx)(d.a,{variant:"contained",onClick:r.clearSchedule,children:"Reset"})}),Object(H.jsx)(u.a,{item:!0,xs:12,className:"break"}),Object(H.jsx)(u.a,{item:!0,xs:12,children:Object(H.jsx)($,{G:t,onClick:function(){r.commitSchedule(),Ge()}})})]})},"next-day"),Object(H.jsxs)(u.a,{item:!0,xs:5,className:"schedule-area",children:[Object(H.jsx)("div",{className:"label",children:Object(H.jsx)("h3",{children:"Schedule"})}),Object(H.jsx)(W,{cards:h,onClickCard:function(e){r.removeCard(e),je()},buttonLabel:"Remove",className:"schedule",unremovable:t.startingSchedule.length,emphasizeButton:!1},"schedule:"+a.turn)]},"schedule-area")]})},numPlayers:1,debug:!0}),ie=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,345)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),n(e),r(e),s(e),c(e)}))};i.a.render(Object(H.jsx)(ce,{}),document.getElementById("root")),ie()}},[[311,1,2]]]);
//# sourceMappingURL=main.b8c16cd8.chunk.js.map