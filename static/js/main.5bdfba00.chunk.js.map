{"version":3,"sources":["Types.ts","Constants.ts","Cards.ts","component/SampleGrid.tsx","component/CardSequence.tsx","Puzzles.ts","Game.ts","component/Board.tsx","App.js","reportWebVitals.js","index.js"],"names":["StepState","StepAction","STEP_COUNT","GRID_WIDTH","ApplyPatternToPart","pattern","part","updatedSteps","steps","entries","stepIndex","stepAction","currentStep","INCREMENT","OFF","ON","ACCENT","DECREMENT","MAX","ZERO","SHIFT_UP","SHIFT_RIGHT","SHIFT_DOWN","SHIFT_LEFT","processStep","CardImpl","flavor","title","description","image","sampleTarget","this","G","playerParts","sample","Cards","layFlat","IGNORE","fold","drop","mop","sweep","vacuum","feast","bus","rinse","scour","dry","laundry","floor","dishes","PatternRows","classSequence","chunkedGrid","chunk","map","row","rowId","className","cellClass","colId","Paper","variant","PartGrid","parts","currentlyPlayingStep","remainingProps","useState","tabIndex","setTabIndex","cellClasses","take","step","index","key","AppBar","position","Tabs","value","onChange","_","newValue","p","Tab","label","style","minWidth","SampleGrid","ActionCard","cardId","cardIndex","buttonLabel","onClickCard","card","maybeClassSequence","Card","CardContent","CardActions","Button","onClick","disabled","EmptyCardSlot","CardSequence","cards","unremovable","Grid","container","Zoom","in","undefined","times","length","LT_PREFIX","process","Puzzles","levelTrack","targetParts","startingHand","startingSchedule","SetupTurn","turn","puzzle","Array","from","newG","playerHand","playerSchedule","forEach","playCard","CheckLevelComplete","targetPartIndex","targetPart","currentPart","i","MyGame","moves","ctx","handSlot","splice","push","removeCard","playerScheduleSlot","INVALID_MOVE","cleanState","removedCardId","replayedCardIndex","replayedCardId","replayedCard","console","log","commitSchedule","events","endTurn","onBegin","ContinueButton","enabled","keyMapper","bd","ch","sd","sampler","Tone","urls","e4","d4","c4","baseUrl","toDestination","App","Client","game","board","useEffect","bpm","start","stop","setCurrentlyPlayingStep","lastPlayedStep","setLastPlayedStep","currentTime","setCurrentTime","isPlaying","setIsPlaying","playerActive","setPlayerActive","triggerAttackRelease","onStep","time","stepId","play","sequencer","range","player","loop","autostart","item","xs","numPlayers","debug","reportWebVitals","onPerfEntry","Function","then","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.5bdfba00.chunk.js","sourcesContent":["/**\n * This represents the top-level data model of the game.\n * Any concept of global consequence should be declared (but not implemented) here.\n * Because the compiler can traverse the dependency graph just fine, the order of declaration\n * should be for human consumption.\n * Thus, top level concepts are presented first, and their dependencies are declared later.\n */\n\n\n////////////////////////////////\n// Puzzle Configuration\n\nexport interface Puzzle {\n  title: string;\n  description: Array<string>;\n  levelTrack: string;\n  // The musical composition the player is aiming to replicate.\n  targetParts: Array<Part>;\n  // The cards you start with in your hand.\n  startingHand: Array<CardId>;\n  // Any initial state that cannot be removed.\n  startingSchedule: Array<CardId>;\n}\n\nexport interface Part {\n  sample: string;\n  steps: StepSequence;\n};\n\nexport type StepSequence = Array<StepState>;\n\nexport enum StepState {\n  OFF = 0,\n  ON = 1,\n  ACCENT = 2,\n};\n\n//////////////////////////////////////////////////////////\n// Gameplay State (i.e. when trying to solve the puzzle)\n\n// Keep this serializable for easy state management.\nexport interface GameState extends Puzzle {\n  // The player's current parts.\n  playerParts: Array<Part>;\n  // The player's current hand.\n  playerHand: Array<CardId>;\n  // The player's current schedule.\n  playerSchedule: Array<CardId>;\n}\n\n// The card identifier is just a string for now. This keeps things serializable.\nexport type CardId = string;\n\n//////////////////////////////////////////////////////////\n// Card Concepts\n\nexport interface CardFlavor {\n  title: string;\n  description: string;\n  image?: string;\n};\n\nexport interface Card extends CardFlavor {\n  // Pattern cards have special UI considerations.\n  sampleTarget?: string;\n  pattern?: Pattern;\n  playCard: CardAction;\n};\n\nexport type Pattern = Array<StepAction>;\n\nexport enum StepAction {\n  INCREMENT,\n  DECREMENT,\n  ZERO,\n  MAX,\n  SHIFT_UP,\n  SHIFT_RIGHT,\n  SHIFT_DOWN,\n  SHIFT_LEFT,\n  IGNORE,\n};\n\nexport type CardAction = (G: GameState) => void;","export const GRID_WIDTH: number = 4;\nexport const GRID_HEIGHT: number = 4;\nexport const STEP_COUNT: number = GRID_WIDTH * GRID_HEIGHT;\nexport const DEFAULT_BPM: number = 116;\nexport const MAX_HAND_SIZE: number = 6;\nexport const TRACK_BARS: number = 8;\n","import { GRID_WIDTH, STEP_COUNT } from \"./Constants\";\nimport { Card, CardFlavor, GameState, Part, Pattern, StepAction, StepState } from \"./Types\";\n\n// Separate from CardImpl, for UI/preview purposes.\nexport const ApplyPatternToPart: (pattern: Pattern, part: Part) => void = (pattern, part) => {\n  const updatedSteps = [...part.steps];\n  for (const [stepIndex, stepAction] of pattern.entries()) {\n    const processStep: () => StepState = () => {\n      const currentStep = part.steps[stepIndex];\n      switch (stepAction) {\n        case StepAction.INCREMENT:\n          if (currentStep === StepState.OFF) {\n            return StepState.ON;\n          } else {\n            return StepState.ACCENT;\n          }\n        case StepAction.DECREMENT:\n          if (currentStep === StepState.ACCENT) {\n            return StepState.ON;\n          } else {\n            return StepState.OFF;\n          }\n        case StepAction.MAX:\n          return StepState.ACCENT;\n        case StepAction.ZERO:\n          return StepState.OFF;\n        case StepAction.SHIFT_UP:\n          if (stepIndex + GRID_WIDTH > STEP_COUNT) {\n            return StepState.OFF\n          }\n          return part.steps[stepIndex + GRID_WIDTH];\n        case StepAction.SHIFT_RIGHT:\n          if ((stepIndex % GRID_WIDTH) === 0) {\n            return StepState.OFF;\n          }\n          return part.steps[stepIndex - 1];\n        case StepAction.SHIFT_DOWN:\n          if (stepIndex - GRID_WIDTH < 0) {\n            return StepState.OFF;\n          }\n          return part.steps[stepIndex - GRID_WIDTH];\n        case StepAction.SHIFT_LEFT:\n          if ((stepIndex % GRID_WIDTH) + 1 === GRID_WIDTH) {\n            return StepState.OFF;\n          }\n          return part.steps[stepIndex + 1];\n        default:\n          return currentStep;\n      }\n    }\n    updatedSteps[stepIndex] = processStep();\n  }\n  part.steps = updatedSteps;\n}\n\nclass CardImpl implements Card {\n  title: string;\n  description: string;\n  image?: string;\n  sampleTarget?: string;\n  pattern?: Pattern;\n\n  constructor(flavor: CardFlavor, pattern?: Pattern, part?: string) {\n    this.title = flavor.title;\n    this.description = flavor.description;\n    this.image = flavor.image;\n    this.pattern = pattern;\n    this.sampleTarget = part;\n  }\n\n  playCard(G: GameState) {\n    for (const part of G.playerParts) {\n      if (part.sample !== this.sampleTarget) {\n        continue;\n      }\n      if (this.pattern) {\n        ApplyPatternToPart(this.pattern, part);\n      }\n    }\n  }\n}\n\nconst Cards : {[key: string]: Card} = {\n  layFlat: new CardImpl(\n    {\n      title: \"Lay Flat\",\n      description: \"Lay your shirt flat on your bed. The foundation of any laundry folding routine.\"\n    },\n    [\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE,\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE,\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE,\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE,\n    ],\n    \"sd\"\n  ),\n  fold: new CardImpl(\n    {\n      title: \"Fold\",\n      description: \"Fold your shirt. Add some complexity! (Assuming you have something to start with...)\"\n    },\n    [\n      StepAction.DECREMENT, StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE,\n      StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE,\n      StepAction.DECREMENT, StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE,\n      StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE,\n    ],\n    \"sd\"\n  ),\n  drop: new CardImpl(\n    {\n      title: \"Drop\",\n      description: \"Oops! You dropped your [?] all over the floor. What a mess...\"\n    },\n    [\n      StepAction.INCREMENT, StepAction.INCREMENT, StepAction.INCREMENT, StepAction.INCREMENT,\n      StepAction.INCREMENT, StepAction.INCREMENT, StepAction.INCREMENT, StepAction.INCREMENT,\n      StepAction.INCREMENT, StepAction.INCREMENT, StepAction.INCREMENT, StepAction.INCREMENT,\n      StepAction.INCREMENT, StepAction.INCREMENT, StepAction.INCREMENT, StepAction.INCREMENT,\n    ],\n    \"bd\"\n  ),\n  mop: new CardImpl(\n    {\n      title: \"Mop\",\n      description: \"Mop the floor. This mess might be a bit too much to soak up though.\"\n    },\n    [\n      StepAction.DECREMENT, StepAction.DECREMENT, StepAction.IGNORE, StepAction.DECREMENT,\n      StepAction.DECREMENT, StepAction.DECREMENT, StepAction.IGNORE, StepAction.DECREMENT,\n      StepAction.DECREMENT, StepAction.DECREMENT, StepAction.IGNORE, StepAction.DECREMENT,\n      StepAction.DECREMENT, StepAction.DECREMENT, StepAction.IGNORE, StepAction.DECREMENT,\n    ],\n    \"bd\"\n  ),\n  sweep: new CardImpl(\n    {\n      title: \"Sweep\",\n      description: \"Sweep the floor. It's a bit hard to reach that corner.\"\n    },\n    [\n      StepAction.ZERO, StepAction.SHIFT_RIGHT, StepAction.SHIFT_RIGHT, StepAction.SHIFT_RIGHT,\n      StepAction.ZERO, StepAction.SHIFT_RIGHT, StepAction.SHIFT_RIGHT, StepAction.SHIFT_RIGHT,\n      StepAction.ZERO, StepAction.SHIFT_RIGHT, StepAction.SHIFT_RIGHT, StepAction.SHIFT_RIGHT,\n      StepAction.ZERO, StepAction.SHIFT_RIGHT, StepAction.SHIFT_RIGHT, StepAction.SHIFT_RIGHT,\n    ],\n    \"bd\"\n  ),\n  vacuum: new CardImpl(\n    {\n      title: \"Vacuum\",\n      description: \"Suck up whatever is left. (Maybe leave 4 [?]s on the floor?)\"\n    },\n    [\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.IGNORE, StepAction.DECREMENT,\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.IGNORE, StepAction.DECREMENT,\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.IGNORE, StepAction.DECREMENT,\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.IGNORE, StepAction.DECREMENT,\n    ],\n    \"bd\"\n  ),\n  feast: new CardImpl(\n    {\n      title: \"Feast\",\n      description: \"What a delicious meal! What are we going to do about all the dishes?\"\n    },\n    [\n      StepAction.INCREMENT, StepAction.INCREMENT, StepAction.INCREMENT, StepAction.INCREMENT,\n      StepAction.IGNORE, StepAction.INCREMENT, StepAction.IGNORE, StepAction.INCREMENT,\n      StepAction.INCREMENT, StepAction.INCREMENT, StepAction.INCREMENT, StepAction.INCREMENT,\n      StepAction.IGNORE, StepAction.INCREMENT, StepAction.IGNORE, StepAction.INCREMENT,\n    ],\n    \"ch\"\n  ),\n  bus: new CardImpl(\n    {\n      title: \"Bus\",\n      description: \"What a delicious meal! What are we going to do about all the dishes?\"\n    },\n    [\n      StepAction.SHIFT_LEFT, StepAction.SHIFT_LEFT, StepAction.SHIFT_LEFT, StepAction.ZERO,\n      StepAction.SHIFT_LEFT, StepAction.SHIFT_LEFT, StepAction.SHIFT_LEFT, StepAction.ZERO,\n      StepAction.SHIFT_LEFT, StepAction.SHIFT_LEFT, StepAction.SHIFT_LEFT, StepAction.ZERO,\n      StepAction.SHIFT_LEFT, StepAction.SHIFT_LEFT, StepAction.SHIFT_LEFT, StepAction.ZERO,\n    ],\n    \"ch\"\n  ),\n  rinse: new CardImpl(\n    {\n      title: \"Rinse\",\n      description: \"Rinse the dishes. This will make them easier to clean.\"\n    },\n    [\n      StepAction.IGNORE, StepAction.ZERO, StepAction.IGNORE, StepAction.IGNORE,\n      StepAction.IGNORE, StepAction.ZERO, StepAction.IGNORE, StepAction.IGNORE,\n      StepAction.IGNORE, StepAction.ZERO, StepAction.IGNORE, StepAction.IGNORE,\n      StepAction.IGNORE, StepAction.ZERO, StepAction.IGNORE, StepAction.IGNORE,\n    ],\n    \"ch\"\n  ),\n  scour: new CardImpl(\n    {\n      title: \"Scour\",\n      description: \"Scour the dishes. Really put your back into it.\"\n    },\n    [\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.INCREMENT, StepAction.IGNORE,\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.INCREMENT, StepAction.IGNORE,\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.INCREMENT, StepAction.IGNORE,\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.INCREMENT, StepAction.IGNORE,\n    ],\n    \"ch\"\n  ),\n  dry: new CardImpl(\n    {\n      title: \"Dry\",\n      description: \"Let the dishes dry. What a lovely sight!\"\n    },\n    [\n      StepAction.DECREMENT, StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE,\n      StepAction.DECREMENT, StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE,\n      StepAction.DECREMENT, StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE,\n      StepAction.DECREMENT, StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE,\n    ],\n    \"ch\"\n  ),\n  laundry: new CardImpl(\n    {\n      title: \"Laundry\",\n      description: \"Do the laundry. You know how!\"\n    },\n    [\n      StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE,\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE,\n      StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE,\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE,\n    ],\n    \"sd\"\n  ),\n  floor: new CardImpl(\n    {\n      title: \"Floor\",\n      description: \"Clean the floor. You know how!\"\n    },\n    [\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE,\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE,\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE,\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.IGNORE, StepAction.IGNORE,\n    ],\n    \"bd\"\n  ),\n  dishes: new CardImpl(\n    {\n      title: \"Dishes\",\n      description: \"Do the dishes. You know how!\"\n    },\n    [\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.MAX, StepAction.IGNORE,\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.MAX, StepAction.IGNORE,\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.MAX, StepAction.IGNORE,\n      StepAction.INCREMENT, StepAction.IGNORE, StepAction.MAX, StepAction.IGNORE,\n    ],\n    \"ch\"\n  )\n};\n\nexport default Cards;","import React, { useState } from 'react';\n\nimport {\n  AppBar,\n  Paper,\n  Tab,\n  Tabs,\n} from '@material-ui/core';\n\nimport {\n  chunk,\n  take,\n} from 'lodash';\n\nimport {\n  GRID_WIDTH,\n  STEP_COUNT,\n} from '../Constants';\nimport { Part, StepSequence, StepState } from '../Types';\n\nexport function PatternRows(\n  { classSequence, ...remainingProps } : React.HTMLAttributes<HTMLElement> & {\n    classSequence: Array<string>,\n  }\n) {\n  const chunkedGrid: Array<Array<string>> = chunk(classSequence, GRID_WIDTH);\n  return <>\n    {\n    chunkedGrid.map((row: Array<string>, rowId: number) => (\n      <tr key={\"row \" + rowId} className=\"row\">\n      {\n        row.map((cellClass: string, colId: number) => {\n          return (\n            <td key={\"col \" + colId} className={cellClass}>\n              <Paper className=\"step\" variant=\"outlined\"/>\n            </td>\n          );\n        })\n      }\n      </tr>\n    ))\n    }\n  </>;\n};\n\nfunction PartGrid(\n  { parts, currentlyPlayingStep, ...remainingProps }: React.HTMLAttributes<HTMLElement> & {\n    parts: Array<Part>, currentlyPlayingStep: number | null\n  }\n)\n{\n  const [tabIndex, setTabIndex] = useState(0);\n  const {\n    steps\n  } = parts[tabIndex];\n  const truncatedSteps: StepSequence = take(steps, STEP_COUNT);\n  const cellClasses: Array<string> = truncatedSteps.map((step: StepState, index: number) => {\n    let cellClass = \"cell \";\n    cellClass += StepState[step] as string + \" \";\n    if (currentlyPlayingStep !== null && index === currentlyPlayingStep % STEP_COUNT) {\n      cellClass += \"playing\";\n    }\n    return cellClass;\n  });\n\n  return (\n    <table {...remainingProps} key={tabIndex}>\n      <caption>\n        <AppBar position=\"relative\">\n          <Tabs\n            variant=\"fullWidth\"\n            value={tabIndex}\n            onChange={(_, newValue: number) => setTabIndex(newValue)}\n            className=\"part-selector\"\n          >\n            {\n              parts.map((p: Part, index: number) =>\n                <Tab\n                  key={\"tab \" + index}\n                  label={p.sample}\n                  style={{ minWidth: 48 }}\n                />\n              )\n            }\n          </Tabs>\n        </AppBar>\n      </caption>\n      <tbody>\n        <PatternRows\n          classSequence={cellClasses}\n        />\n      </tbody>\n    </table>\n  );\n}\n\nexport default function SampleGrid(\n  { parts, currentlyPlayingStep, ...remainingProps }: React.HTMLAttributes<HTMLElement> & {\n    parts: Array<Part>, currentlyPlayingStep: number | null \n  }\n) {\n  return <>\n    <PartGrid\n      parts={parts}\n      currentlyPlayingStep={currentlyPlayingStep}\n      {...remainingProps}\n    />\n  </>\n};","import { Button, Card, CardActions, CardContent, Grid, Zoom } from \"@material-ui/core\";\nimport { times } from \"lodash\";\nimport { ReactElement } from \"react\";\n\nimport Cards from '../Cards';\nimport { MAX_HAND_SIZE } from \"../Constants\";\nimport { CardId, StepAction } from \"../Types\";\nimport { PatternRows } from \"./SampleGrid\";\n\nexport function ActionCard({\n  cardId, cardIndex, buttonLabel, onClickCard\n}: {cardId: CardId, cardIndex: number, buttonLabel: string, onClickCard: any} & React.HTMLAttributes<HTMLDivElement>)\n: ReactElement {\n  const card = Cards[cardId];\n  const maybeClassSequence = card.pattern?.map(\n    (stepAction: StepAction) => \"cell \" + StepAction[stepAction] as string\n  );\n  return <Card variant=\"outlined\" className=\"card\">\n    <CardContent>\n      <h2>{card.title}</h2>\n      {card.sampleTarget && <span>{card.sampleTarget}</span>}\n      {maybeClassSequence && \n        <table className=\"pattern\">\n          <tbody>\n            <PatternRows\n              classSequence={maybeClassSequence}\n            />\n          </tbody>\n        </table>\n      }\n      <p>{card.description}</p>\n    </CardContent> \n    <CardActions>\n      <Button\n        variant=\"contained\"\n        onClick={()=>onClickCard(cardIndex)}\n        disabled={!onClickCard}\n      >\n        {buttonLabel}\n      </Button>         \n    </CardActions>\n  </Card>;\n};\n\nexport function EmptyCardSlot(): ReactElement {\n  return <Card variant=\"outlined\" className=\"card empty\">\n    <CardContent>\n      &nbsp;\n    </CardContent> \n  </Card>\n}\n\nexport default function CardSequence({\n  cards, buttonLabel, onClickCard, unremovable, ...remainingProps\n}: {\n  cards: Array<CardId>, buttonLabel: string, onClickCard: any, unremovable: number\n} & React.HTMLAttributes<HTMLDivElement>) {\n  // The <div></div> wrappers below are a material-ui workaround.\n  // See https://stackoverflow.com/questions/57078732/material-ui-fade-component-does-not-show-hide-or-fade-components\n  return <Grid container {...remainingProps}>\n    {\n    cards.map((cardId: string, index: number) => \n      <Zoom in={true} key={\"transition \" + index}>\n        <div>\n          <ActionCard\n            cardId={cardId}\n            cardIndex={index}\n            buttonLabel={buttonLabel}\n            onClickCard={index >= unremovable ? onClickCard : undefined}\n            key={\"actionCard \" + index}\n          />\n        </div>\n      </Zoom>\n    )\n    }\n    {\n      times(MAX_HAND_SIZE - cards.length, () => null).map(\n        (_, index) =>\n        <Zoom in={true} key={\"transition \" + (cards.length + index)}>\n          <div>\n            <EmptyCardSlot key={cards.length + index}/>\n          </div>\n        </Zoom>\n      )\n    }\n  </Grid>;\n};","import { Puzzle, StepState } from \"./Types\";\n\nconst LT_PREFIX = process.env.PUBLIC_URL + \"/samples/levels/\";\nconst Puzzles: Array<Puzzle> = [\n  // 0\n  {\n    title: \"The Laundry\",\n    description: [\n      \"laundry laundry laundry\",\n      \"laundry laundry\"\n    ],\n    levelTrack: `${LT_PREFIX}dummy116bpm.ogg`,\n    targetParts: [\n      {\n        sample: \"sd\",\n        steps: [\n          StepState.OFF, StepState.OFF, StepState.OFF, StepState.OFF,\n          StepState.ON, StepState.OFF, StepState.OFF, StepState.OFF,\n          StepState.OFF, StepState.OFF, StepState.OFF, StepState.OFF,\n          StepState.ON, StepState.OFF, StepState.OFF, StepState.OFF,\n        ],\n      },\n    ],\n    startingHand: [\n      \"layFlat\",\n      \"fold\",\n    ],\n    startingSchedule: [],\n  },\n  // 1\n  {\n    title: \"The Floor\",\n    description: [\n      \"floor sweepy sweepy floor\",\n      \"sweepy sweepy floor floor\"\n    ],\n    levelTrack: `${LT_PREFIX}dummy116bpm.ogg`,\n    targetParts: [\n      {\n        sample: \"bd\",\n        steps: [\n          StepState.ON, StepState.OFF, StepState.OFF, StepState.OFF,\n          StepState.ON, StepState.OFF, StepState.OFF, StepState.OFF,\n          StepState.ON, StepState.OFF, StepState.OFF, StepState.OFF,\n          StepState.ON, StepState.OFF, StepState.OFF, StepState.OFF,\n        ],\n      },\n    ],\n    startingHand:  [\n      \"mop\",\n      \"sweep\",\n      \"vacuum\",\n    ],\n    startingSchedule: [\n      \"drop\",\n    ]\n  },\n  // 2\n  {\n    title: \"The Dishes\",\n    description: [\n      \"dishy dishy wishy wash\",\n      \"washa dishy dish dish\"\n    ],\n    levelTrack: `${LT_PREFIX}dummy116bpm.ogg`,\n    targetParts: [\n      {\n        sample: \"ch\",\n        steps: [\n          StepState.ON, StepState.OFF, StepState.ACCENT, StepState.OFF,\n          StepState.ON, StepState.OFF, StepState.ACCENT, StepState.OFF,\n          StepState.ON, StepState.OFF, StepState.ACCENT, StepState.OFF,\n          StepState.ON, StepState.OFF, StepState.ACCENT, StepState.OFF,\n        ],\n      },\n    ],\n    startingHand: [\n      \"bus\",\n      \"rinse\",\n      \"scour\",\n      \"dry\",\n    ],\n    startingSchedule: [\n      \"feast\",\n    ],\n  },\n  // 3\n  {\n    title: \"Putting it All Together\",\n    description: [\n      \"every every thing thing\",\n      \"all at once\"\n    ],\n    levelTrack: `${LT_PREFIX}dummy116bpm.ogg`,\n    targetParts: [\n      {\n        sample: \"sd\",\n        steps: [\n          StepState.OFF, StepState.OFF, StepState.OFF, StepState.OFF,\n          StepState.ON, StepState.OFF, StepState.OFF, StepState.OFF,\n          StepState.OFF, StepState.OFF, StepState.OFF, StepState.OFF,\n          StepState.ON, StepState.OFF, StepState.OFF, StepState.OFF,\n        ],\n      },\n      {\n        sample: \"bd\",\n        steps: [\n          StepState.ON, StepState.OFF, StepState.OFF, StepState.OFF,\n          StepState.ON, StepState.OFF, StepState.OFF, StepState.OFF,\n          StepState.ON, StepState.OFF, StepState.OFF, StepState.OFF,\n          StepState.ON, StepState.OFF, StepState.OFF, StepState.OFF,\n        ],\n      },\n      {\n        sample: \"ch\",\n        steps: [\n          StepState.ON, StepState.OFF, StepState.ACCENT, StepState.OFF,\n          StepState.ON, StepState.OFF, StepState.ACCENT, StepState.OFF,\n          StepState.ON, StepState.OFF, StepState.ACCENT, StepState.OFF,\n          StepState.ON, StepState.OFF, StepState.ACCENT, StepState.OFF,\n        ],\n      },\n    ],\n    startingHand: [\n      \"laundry\",\n      \"floor\",\n      \"dishes\",\n    ],\n    startingSchedule: []\n  },\n];\n\nexport default Puzzles;","import { Ctx, Game } from 'boardgame.io';\n\nimport Puzzles from './Puzzles';\nimport Cards from './Cards';\n\nimport { STEP_COUNT } from './Constants';\nimport { GameState, Part, StepSequence, StepState } from './Types';\nimport { INVALID_MOVE } from 'boardgame.io/core';\n\n\nexport const FLIP:string = \"flip\";\n\nconst EmptyPart: () => StepSequence = () => Array.from({length: STEP_COUNT}, () => StepState.OFF);\n\nconst SetupTurn = (turn: number) => {\n  const puzzle = Puzzles[turn - 1];\n  const playerParts: Array<Part> = puzzle.targetParts.map(\n    (part: Part) => ({\n      sample: part.sample,\n      steps: EmptyPart()\n    })\n  );\n  const newG = {\n    // Immutable stuff.\n    ...puzzle,\n    // Changing stuff.\n    playerParts,\n    playerHand: [...puzzle.startingHand],\n    playerSchedule: [...(puzzle.startingSchedule ?? [])],\n  };\n  // Apply any fixed cards.\n  (puzzle.startingSchedule ?? []).forEach((cardId) => Cards[cardId].playCard(newG))\n  return newG;\n}\n\nexport const CheckLevelComplete: (G: GameState) => boolean = (G: GameState) => {\n  for (const [targetPartIndex, targetPart] of G.targetParts.entries()) {\n    const currentPart = G.playerParts[targetPartIndex];\n    for (let i: number = 0; i < STEP_COUNT; i++) {\n      if (currentPart.steps[i] !== targetPart.steps[i]) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nexport const MyGame: Game = {\n  moves: {\n    playCard: (G: GameState, ctx: Ctx, handSlot: number) => {\n      const cardId = G.playerHand[handSlot];\n      const card = Cards[cardId];\n      card.playCard(G); \n      // Remove the played card.\n      G.playerHand.splice(handSlot, 1);\n      // Add it to the play stack.\n      G.playerSchedule.push(cardId);\n    },\n    removeCard: (G: GameState, ctx: Ctx, playerScheduleSlot: number) => {\n      if (playerScheduleSlot < G.startingSchedule.length) {\n        return INVALID_MOVE;\n      }\n      // Reset the turn and re-apply the cards in sequence. \n      const cleanState: GameState = SetupTurn(ctx.turn);\n      \n      // Add the removed card back to the hand.\n      cleanState.playerHand = [...G.playerHand];\n      const removedCardId = G.playerSchedule[playerScheduleSlot];\n      cleanState.playerHand.push(removedCardId);\n\n      // Re-play the remaining cards.\n      for (const [replayedCardIndex, replayedCardId] of G.playerSchedule.entries()) {\n        if (replayedCardIndex === playerScheduleSlot || replayedCardIndex < G.startingSchedule.length) {\n          // Ignore this removed card.\n          continue;\n        }\n        const replayedCard = Cards[replayedCardId];\n        console.log(cleanState);\n        replayedCard.playCard(cleanState);\n        console.log(cleanState);\n        cleanState.playerSchedule.push(replayedCardId);\n      }\n      return cleanState;\n    },\n    commitSchedule: (G: GameState, ctx: Ctx) => {\n      if (CheckLevelComplete(G)) {\n        ctx.events?.endTurn?.();\n      }\n    },\n  },\n  turn: {\n    onBegin: (G: GameState, ctx: Ctx) => SetupTurn(ctx.turn)\n  }\n};","import {\n  BoardProps \n} from 'boardgame.io/react'\n\nimport {\n  Button,\n  Grid,\n} from '@material-ui/core';\n\nimport CardSequence from './CardSequence';\nimport SampleGrid from './SampleGrid';\nimport { GameState, StepState } from '../Types';\nimport { CheckLevelComplete } from '../Game';\nimport { range } from 'lodash';\nimport React, { useEffect, useState } from 'react';\nimport { DEFAULT_BPM, STEP_COUNT, TRACK_BARS } from '../Constants';\nimport * as Tone from 'tone';\nimport { Time } from 'tone/build/esm/core/type/Units';\n\nfunction ContinueButton({G, onClick} : {G: GameState, onClick: any} ) {\n  const enabled = CheckLevelComplete(G);\n  return <Button variant=\"contained\" onClick={onClick} disabled={!enabled}>\n   Next Day \n  </Button>;\n}\nconst keyMapper: { [key: string]: string } = {\n  bd: \"e4\",\n  ch: \"d4\",\n  sd: \"c4\",\n};\n\nconst sampler = new Tone.Sampler({\n  urls: {\n    // Bass Drum\n    e4: \"BD/E808_BD[short]-03.wav\",\n    // Closed Hat\n    d4: \"CH/E808_CH-06.wav\",\n    // Snare\n    c4: \"SD/E808_SD-03.wav\",\n  },\n  baseUrl: process.env.PUBLIC_URL + \"/samples/808/\"\n}).toDestination();\n\nexport default function Board({\n  G, ctx, moves  \n} : React.HTMLAttributes<HTMLElement> & BoardProps<GameState>)\n{\n  const {\n    title,\n    levelTrack,\n    playerParts,\n    targetParts,\n    playerHand,\n    playerSchedule,\n  } = G;\n  useEffect(() => {\n    Tone.Transport.bpm.value = DEFAULT_BPM;\n    Tone.Transport.start();\n    return () => {\n      Tone.Transport.stop();\n    }\n  }, []);\n  const [currentlyPlayingStep, setCurrentlyPlayingStep] = useState<number | null>(null);\n  const [lastPlayedStep, setLastPlayedStep] = useState<number | null>(null);\n  const [currentTime, setCurrentTime] = useState<Time | undefined>(undefined);\n  const [isPlaying, setIsPlaying] = useState(false);\n  const [playerActive, setPlayerActive] = useState(true);\n  useEffect(() => {\n    if (lastPlayedStep === currentlyPlayingStep) {\n      return;\n    }\n    if(typeof currentTime === 'undefined') {\n      return;\n    }\n    if (currentlyPlayingStep === null) {\n      return;\n    }\n    console.log(currentlyPlayingStep);\n    setLastPlayedStep(currentlyPlayingStep);\n    // stepIndex selects from our step sequencer, which is only 16th notes on repeat.\n    const stepIndex = currentlyPlayingStep % STEP_COUNT;\n    const parts = playerActive ? playerParts : targetParts;\n    for (let part of parts) {\n      if (part.steps[stepIndex] !== StepState.OFF) {\n        sampler.triggerAttackRelease(keyMapper[part.sample], \"16n\", currentTime, part.steps[stepIndex] / 2);\n      }\n    }\n    if (currentlyPlayingStep >= (STEP_COUNT * TRACK_BARS) - 1) {\n      setIsPlaying(false);\n      setCurrentTime(undefined);\n      setCurrentlyPlayingStep(null);\n      return;\n    }\n  }, [currentTime, playerParts, targetParts, currentlyPlayingStep, lastPlayedStep, playerActive])\n  const onStep = (time: Time, stepId: number) => {\n    // This is a bit subtle: time has to be set before step.\n    // Only step triggers the sample side effect.\n    setCurrentTime(time);\n    setCurrentlyPlayingStep(stepId);\n  };\n  const play = () => {\n    if (isPlaying) {\n      return;\n    }\n    const sequencer = new Tone.Sequence(\n      onStep,\n      range(STEP_COUNT * TRACK_BARS),\n      \"16n\"\n    );\n    const player = new Tone.Player(\n      levelTrack,\n      () => {\n        setIsPlaying(true);\n        Tone.start();\n        sequencer.loop = false;\n        sequencer.start();\n      }\n    ).toDestination();\n    player.loop = false;\n    player.autostart = true;\n  };\n  /*\n    <Grid item xs={1} className=\"target-parts\">\n      <h1>Goal</h1>\n      <SampleGrid\n        parts={parts}\n        className=\"sampler goal\"\n      />\n    </Grid>\n  */\n  return <Grid container>\n    <Grid item xs={12} className=\"level-title\">\n      <h1>{ctx.turn}: {title}</h1>\n    </Grid>\n    <Grid item xs={1} className=\"current-parts\">\n      <Button\n        variant=\"contained\"\n        disabled={playerActive}\n        onClick={() => {\n          setPlayerActive(true);\n          play();\n        }}\n      >\n        Current\n      </Button>\n      <SampleGrid\n        parts={playerParts}\n        currentlyPlayingStep={playerActive ? currentlyPlayingStep : null}\n        className=\"sampler player\"\n      />\n    </Grid>\n    <Grid item xs={1} className=\"current-parts\">\n      <Button\n        variant=\"contained\"\n        disabled={!playerActive}\n        onClick={() => {\n          setPlayerActive(false);\n          play();\n        }}\n      >\n        Target\n      </Button>\n      <SampleGrid\n        parts={targetParts}\n        currentlyPlayingStep={!playerActive ? currentlyPlayingStep : null}\n        className=\"sampler player\"\n      />\n    </Grid>\n    <Grid item xs={9}/>\n    <Grid item xs={12} className=\"hand-area\">\n      <h1>Hand</h1>\n      <CardSequence\n        cards={playerHand}\n        onClickCard={(i: number) => {\n          moves.playCard(i);\n          play();\n        }}\n        buttonLabel=\"Enqueue\"\n        className=\"hand\"\n        unremovable={0}\n      />\n    </Grid>\n    <Grid item xs={12} className=\"schedule-area\">\n      <h1>Schedule &nbsp; <ContinueButton G={G} onClick={moves.commitSchedule}/></h1>\n      <CardSequence\n        cards={playerSchedule}\n        onClickCard={(i: number) => {\n          moves.removeCard(i);\n          play();\n        }}\n        buttonLabel=\"Remove\"\n        className=\"schedule\"\n        unremovable={G.startingSchedule.length}\n      />\n    </Grid>\n  </Grid>;\n}","import './App.css';\nimport { Client } from 'boardgame.io/react';\nimport Board from './component/Board';\nimport { MyGame } from './Game';\n\nconst App = Client({ game: MyGame, board: Board, numPlayers: 1, debug: true});\n\nexport default App;\n","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <App/>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n"],"sourceRoot":""}