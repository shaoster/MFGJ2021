(this.webpackJsonpmfgj202106=this.webpackJsonpmfgj202106||[]).push([[0],{104:function(e,t,a){},105:function(e,t,a){},144:function(e,t){},147:function(e,t,a){"use strict";a.r(t);var n,r,s=a(8),E=a.n(s),c=a(28),l=a.n(c),O=(a(104),a(105),a(91)),i=a(167),N=a(171),o=a(4),R=a(21),I=a(168),F=a(169),u=a(170),d=a(173),T=a(39),h=a(0),p=a(1),j=a(14),b=a(16),C=a(13),G=16;!function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON",e[e.ACCENT=2]="ACCENT"}(n||(n={})),function(e){e[e.INCREMENT=0]="INCREMENT",e[e.DECREMENT=1]="DECREMENT",e[e.ZERO=2]="ZERO",e[e.MAX=3]="MAX",e[e.SHIFT_UP=4]="SHIFT_UP",e[e.SHIFT_RIGHT=5]="SHIFT_RIGHT",e[e.SHIFT_DOWN=6]="SHIFT_DOWN",e[e.SHIFT_LEFT=7]="SHIFT_LEFT",e[e.IGNORE=8]="IGNORE"}(r||(r={}));var m=function(e,t){var a,s=Object(C.a)(t.steps),E=Object(b.a)(e.entries());try{var c=function(){var e=Object(j.a)(a.value,2),E=e[0],c=e[1];s[E]=function(){var e=t.steps[E];switch(c){case r.INCREMENT:return e===n.OFF?n.ON:n.ACCENT;case r.DECREMENT:return e===n.ACCENT?n.ON:n.OFF;case r.MAX:return n.ACCENT;case r.ZERO:return n.OFF;case r.SHIFT_UP:return E+4>G?n.OFF:t.steps[E+4];case r.SHIFT_RIGHT:return E%4===0?n.OFF:t.steps[E-1];case r.SHIFT_DOWN:return E-4<0?n.OFF:t.steps[E-4];case r.SHIFT_LEFT:return E%4+1===4?n.OFF:t.steps[E+1];default:return e}}()};for(E.s();!(a=E.n()).done;)c()}catch(l){E.e(l)}finally{E.f()}t.steps=s},v=function(){function e(t,a,n){Object(h.a)(this,e),this.title=void 0,this.description=void 0,this.image=void 0,this.sampleTarget=void 0,this.pattern=void 0,this.title=t.title,this.description=t.description,this.image=t.image,this.pattern=a,this.sampleTarget=n}return Object(p.a)(e,[{key:"playCard",value:function(e){var t,a=Object(b.a)(e.playerParts);try{for(a.s();!(t=a.n()).done;){var n=t.value;n.sample===this.sampleTarget&&(console.log(this.pattern),this.pattern&&m(this.pattern,n))}}catch(r){a.e(r)}finally{a.f()}}}]),e}(),f={layFlat:new v({title:"Lay Flat",description:"Lay your shirt flat on your bed. The foundation of any laundry folding routine."},[r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE],"sd"),fold:new v({title:"Fold",description:"Fold your shirt. Add some complexity! (Assuming you have something to start with...)"},[r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE],"sd"),drop:new v({title:"Drop",description:"Oops! You dropped your [?] all over the floor. What a mess..."},[r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT],"bd"),mop:new v({title:"Mop",description:"Mop the floor. This mess might be a bit too much to soak up though."},[r.DECREMENT,r.DECREMENT,r.IGNORE,r.DECREMENT,r.DECREMENT,r.DECREMENT,r.IGNORE,r.DECREMENT,r.DECREMENT,r.DECREMENT,r.IGNORE,r.DECREMENT,r.DECREMENT,r.DECREMENT,r.IGNORE,r.DECREMENT],"bd"),sweep:new v({title:"Sweep",description:"Sweep the floor. It's a bit hard to reach that corner."},[r.ZERO,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.ZERO,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.ZERO,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.ZERO,r.SHIFT_RIGHT,r.SHIFT_RIGHT,r.SHIFT_RIGHT],"bd"),vacuum:new v({title:"Vacuum",description:"Suck up whatever is left. (Maybe leave 4 [?]s on the floor?)"},[r.INCREMENT,r.IGNORE,r.IGNORE,r.DECREMENT,r.INCREMENT,r.IGNORE,r.IGNORE,r.DECREMENT,r.INCREMENT,r.IGNORE,r.IGNORE,r.DECREMENT,r.INCREMENT,r.IGNORE,r.IGNORE,r.DECREMENT],"bd"),feast:new v({title:"Feast",description:"What a delicious meal! What are we going to do about all the dishes?"},[r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT],"ch"),bus:new v({title:"Bus",description:"What a delicious meal! What are we going to do about all the dishes?"},[r.SHIFT_LEFT,r.SHIFT_LEFT,r.SHIFT_LEFT,r.ZERO,r.SHIFT_LEFT,r.SHIFT_LEFT,r.SHIFT_LEFT,r.ZERO,r.SHIFT_LEFT,r.SHIFT_LEFT,r.SHIFT_LEFT,r.ZERO,r.SHIFT_LEFT,r.SHIFT_LEFT,r.SHIFT_LEFT,r.ZERO],"ch"),rinse:new v({title:"Rinse",description:"Rinse the dishes. This will make them easier to clean."},[r.IGNORE,r.ZERO,r.IGNORE,r.IGNORE,r.IGNORE,r.ZERO,r.IGNORE,r.IGNORE,r.IGNORE,r.ZERO,r.IGNORE,r.IGNORE,r.IGNORE,r.ZERO,r.IGNORE,r.IGNORE],"ch"),scour:new v({title:"Scour",description:"Scour the dishes. Really put your back into it."},[r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE,r.INCREMENT,r.IGNORE],"ch"),dry:new v({title:"Dry",description:"Let the dishes dry. What a lovely sight!"},[r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.DECREMENT,r.IGNORE,r.IGNORE,r.IGNORE],"ch"),laundry:new v({title:"Laundry",description:"Do the laundry. You know how!"},[r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE],"sd"),floor:new v({title:"Floor",description:"Clean the floor. You know how!"},[r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE,r.INCREMENT,r.IGNORE,r.IGNORE,r.IGNORE],"bd"),dishes:new v({title:"Dishes",description:"Do the dishes. You know how!"},[r.INCREMENT,r.IGNORE,r.MAX,r.IGNORE,r.INCREMENT,r.IGNORE,r.MAX,r.IGNORE,r.INCREMENT,r.IGNORE,r.MAX,r.IGNORE,r.INCREMENT,r.IGNORE,r.MAX,r.IGNORE],"ch")},M=a(7),y=a.n(M),S=a(12),g=a(33),x=a(92),H=a(165),w=a(172),D=a(166),_=a(15),L=["classSequence"],k=["parts","currentlyPlayingStep"],P=["parts"];function A(e){var t=e.classSequence,a=(Object(R.a)(e,L),Object(T.chunk)(t,4));return Object(_.jsx)(_.Fragment,{children:a.map((function(e,t){return Object(_.jsx)("tr",{className:"row",children:e.map((function(e,t){return Object(_.jsx)("td",{className:e,children:Object(_.jsx)(x.a,{className:"step",variant:"outlined"})},"col "+t)}))},"row "+t)}))})}function Z(e){var t=e.parts,a=e.currentlyPlayingStep,r=Object(R.a)(e,k),E=Object(s.useState)(0),c=Object(j.a)(E,2),l=c[0],O=c[1],i=t[l].steps,N=Object(T.take)(i,G).map((function(e,t){var r="cell ";return r+=n[e]+" ",t===a&&(r+="playing"),r}));return Object(s.createElement)("table",Object(o.a)(Object(o.a)({},r),{},{key:l}),Object(_.jsx)("caption",{children:Object(_.jsx)(H.a,{position:"relative",children:Object(_.jsx)(w.a,{variant:"fullWidth",value:l,onChange:function(e,t){return O(t)},className:"part-selector",children:t.map((function(e,t){return Object(_.jsx)(D.a,{label:e.sample,style:{minWidth:48}},"tab "+t)}))})})}),Object(_.jsx)("tbody",{children:Object(_.jsx)(A,{classSequence:N})}))}var W={bd:"e4",ch:"d4",sd:"c4"},X=new g.a({urls:{e4:"BD/E808_BD[short]-03.wav",d4:"CH/E808_CH-06.wav",c4:"SD/E808_SD-03.wav"},baseUrl:"/mfgj202106/samples/808/"}).toDestination();function B(e){var t=e.parts,a=Object(R.a)(e,P);Object(s.useEffect)((function(){return g.c.bpm.value=79,g.c.start(),function(){g.c.stop()}}),[]);var r=Object(s.useState)(null),E=Object(j.a)(r,2),c=E[0],l=E[1],O=Object(s.useState)(!1),N=Object(j.a)(O,2),I=N[0],F=N[1],u=function(){var e=Object(S.a)(y.a.mark((function e(){var a;return y.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new g.b((function(e,a){if(a>=G)return l(null),void F(!1);l(a);var r,s=Object(b.a)(t);try{for(s.s();!(r=s.n()).done;){var E=r.value;E.steps[a]!==n.OFF&&X.triggerAttackRelease(W[E.sample],"16n",e,E.steps[a]/2)}}catch(c){s.e(c)}finally{s.f()}}),Object(T.range)(17),"16n"),F(!0),g.d(),a.loop=!1,a.start();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(_.jsxs)(_.Fragment,{children:[Object(_.jsx)(Z,Object(o.a)({parts:t,currentlyPlayingStep:c},a)),Object(_.jsx)(i.a,{variant:"contained",onClick:u,disabled:I,children:I?"Playing":"Play"})]})}var q=["cards","buttonLabel","onClickCard","unremovable"];function U(e){var t,a=e.cardId,n=e.cardIndex,s=e.buttonLabel,E=e.onClickCard,c=f[a],l=null===(t=c.pattern)||void 0===t?void 0:t.map((function(e){return"cell "+r[e]}));return Object(_.jsxs)(I.a,{variant:"outlined",className:"card",children:[Object(_.jsxs)(F.a,{children:[Object(_.jsx)("h2",{children:c.title}),c.sampleTarget&&Object(_.jsx)("span",{children:c.sampleTarget}),l&&Object(_.jsx)("table",{className:"pattern",children:Object(_.jsx)(A,{classSequence:l})}),Object(_.jsx)("p",{children:c.description})]}),Object(_.jsx)(u.a,{children:Object(_.jsx)(i.a,{variant:"contained",onClick:function(){return E(n)},disabled:!E,children:s})})]})}function Y(){return Object(_.jsx)(I.a,{variant:"outlined",className:"card empty",children:Object(_.jsx)(F.a,{children:"\xa0"})})}function J(e){var t=e.cards,a=e.buttonLabel,n=e.onClickCard,r=e.unremovable,s=Object(R.a)(e,q);return Object(_.jsxs)(N.a,Object(o.a)(Object(o.a)({container:!0},s),{},{children:[t.map((function(e,t){return Object(_.jsx)(d.a,{in:!0,children:Object(_.jsx)("div",{children:Object(_.jsx)(U,{cardId:e,cardIndex:t,buttonLabel:a,onClickCard:t>=r?n:void 0},"actionCard "+t)})},"transition "+t)})),Object(T.times)(6-t.length,(function(){return null})).map((function(e,a){return Object(_.jsx)(d.a,{in:!0,children:Object(_.jsx)("div",{children:Object(_.jsx)(Y,{},t.length+a)})},"transition "+(t.length+a))}))]}))}var V=[{title:"The Laundry",targetParts:[{sample:"sd",steps:[n.OFF,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF]}],startingHand:["layFlat","fold"]},{title:"The Floor",targetParts:[{sample:"bd",steps:[n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF]}],startingHand:["mop","sweep","vacuum"],playerSchedule:["drop"]},{title:"The Dishes",targetParts:[{sample:"ch",steps:[n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF]}],startingHand:["bus","rinse","scour","dry"],playerSchedule:["feast"]},{title:"Putting it All Together",targetParts:[{sample:"sd",steps:[n.OFF,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF]},{sample:"bd",steps:[n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF,n.ON,n.OFF,n.OFF,n.OFF]},{sample:"ch",steps:[n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF,n.ON,n.OFF,n.ACCENT,n.OFF]}],startingHand:["laundry","floor","dishes"]}],z=a(10),K=function(e){var t,a,r,s,E=V[e-1],c=E.targetParts.map((function(e){return{sample:e.sample,steps:Array.from({length:G},(function(){return n.OFF}))}})),l={levelTitle:E.title,playerParts:c,targetParts:Object(C.a)(E.targetParts),playerHand:Object(C.a)(E.startingHand),playerSchedule:Object(C.a)(null!==(t=E.playerSchedule)&&void 0!==t?t:[]),activePart:null,unremovable:null!==(a=null===(r=E.playerSchedule)||void 0===r?void 0:r.length)&&void 0!==a?a:0};return(null!==(s=E.playerSchedule)&&void 0!==s?s:[]).forEach((function(e){return f[e].playCard(l)})),l},Q=function(e){var t,a=Object(b.a)(e.targetParts.entries());try{for(a.s();!(t=a.n()).done;)for(var n=Object(j.a)(t.value,2),r=n[0],s=n[1],E=e.playerParts[r],c=0;c<G;c++)if(E.steps[c]!==s.steps[c])return!1}catch(l){a.e(l)}finally{a.f()}return!0},$={moves:{playCard:function(e,t,a){var n=e.playerHand[a];f[n].playCard(e),e.playerHand.splice(a,1),e.playerSchedule.push(n)},removeCard:function(e,t,a){if(a<e.unremovable)return z.x;var n=K(t.turn);n.playerHand=Object(C.a)(e.playerHand);var r=e.playerSchedule[a];n.playerHand.push(r);var s,E=Object(b.a)(e.playerSchedule.entries());try{for(E.s();!(s=E.n()).done;){var c=Object(j.a)(s.value,2),l=c[0],O=c[1];if(!(l===a||l<e.unremovable)){var i=f[O];console.log(n),i.playCard(n),console.log(n),n.playerSchedule.push(O)}}}catch(N){E.e(N)}finally{E.f()}return n},commitSchedule:function(e,t){var a,n;Q(e)&&(null===(a=t.events)||void 0===a||null===(n=a.endTurn)||void 0===n||n.call(a))}},turn:{onBegin:function(e,t){return K(t.turn)}}};function ee(e){var t=e.G,a=e.onClick,n=Q(t);return Object(_.jsx)(i.a,{variant:"contained",onClick:a,disabled:!n,children:"Next Day"})}var te=Object(O.a)({game:$,board:function(e){var t=e.G,a=e.ctx,n=e.moves,r=t.playerParts,s=t.targetParts,E=t.unremovable;return Object(_.jsxs)(N.a,{container:!0,children:[Object(_.jsx)(N.a,{item:!0,xs:12,className:"level-title",children:Object(_.jsxs)("h1",{children:[a.turn,": ",t.levelTitle]})}),Object(_.jsxs)(N.a,{item:!0,xs:1,className:"current-parts",children:[Object(_.jsx)("h1",{children:"Current"}),Object(_.jsx)(B,{parts:r,className:"sampler player"})]}),Object(_.jsxs)(N.a,{item:!0,xs:1,className:"target-parts",children:[Object(_.jsx)("h1",{children:"Goal"}),Object(_.jsx)(B,{parts:s,className:"sampler goal"})]}),Object(_.jsx)(N.a,{item:!0,xs:1,className:"continue"}),Object(_.jsx)(N.a,{item:!0,xs:9}),Object(_.jsxs)(N.a,{item:!0,xs:12,className:"hand-area",children:[Object(_.jsx)("h1",{children:"Hand"}),Object(_.jsx)(J,{cards:t.playerHand,onClickCard:n.playCard,buttonLabel:"Enqueue",className:"hand",unremovable:0})]}),Object(_.jsxs)(N.a,{item:!0,xs:12,className:"schedule-area",children:[Object(_.jsxs)("h1",{children:["Schedule \xa0 ",Object(_.jsx)(ee,{G:t,onClick:n.commitSchedule})]}),Object(_.jsx)(J,{cards:t.playerSchedule,onClickCard:n.removeCard,buttonLabel:"Remove",className:"schedule",unremovable:E})]})]})},numPlayers:1,debug:!0}),ae=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,174)).then((function(t){var a=t.getCLS,n=t.getFID,r=t.getFCP,s=t.getLCP,E=t.getTTFB;a(e),n(e),r(e),s(e),E(e)}))};l.a.render(Object(_.jsx)(E.a.StrictMode,{children:Object(_.jsx)(te,{})}),document.getElementById("root")),ae()}},[[147,1,2]]]);
//# sourceMappingURL=main.f44b90e2.chunk.js.map