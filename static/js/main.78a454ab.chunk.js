(this.webpackJsonpmfgj202106=this.webpackJsonpmfgj202106||[]).push([[0],{136:function(e,t){},139:function(e,t,a){"use strict";a.r(t);var r,n,s=a(8),c=a.n(s),l=a(31),O=a.n(l),i=(a(96),a(97),a(84)),F=a(161),o=a(4),d=a(20),u=a(158),j=a(159),p=a(160),b=a(157),h=a(0),f=a(1),N=a(13),v=a(14);!function(e){e[e.OFF=0]="OFF",e[e.ON=1]="ON",e[e.ACCENT=2]="ACCENT"}(r||(r={})),function(e){e[e.SET_ACCENTED=0]="SET_ACCENTED",e[e.SET_ON=1]="SET_ON",e[e.SET_OFF=2]="SET_OFF",e[e.IGNORE=3]="IGNORE"}(n||(n={}));var m=function(e,t){var a,s=Object(v.a)(e.entries());try{for(s.s();!(a=s.n()).done;){var c=Object(N.a)(a.value,2),l=c[0];switch(c[1]){case n.SET_ACCENTED:t.steps[l]=r.ACCENT;break;case n.SET_ON:t.steps[l]=r.ON;break;case n.SET_OFF:t.steps[l]=r.OFF;break;default:continue}}}catch(O){s.e(O)}finally{s.f()}},E=function(){function e(t,a,r){Object(h.a)(this,e),this.title=void 0,this.description=void 0,this.image=void 0,this.sampleTarget=void 0,this.pattern=void 0,this.title=t.title,this.description=t.description,this.image=t.image,this.pattern=a,this.sampleTarget=r}return Object(f.a)(e,[{key:"playCard",value:function(e){var t,a=Object(v.a)(e.playerParts);try{for(a.s();!(t=a.n()).done;){var r=t.value;r.sample===this.sampleTarget&&(console.log(this.pattern),this.pattern&&m(this.pattern,r))}}catch(n){a.e(n)}finally{a.f()}}}]),e}(),y={layFlat:new E({title:"Lay Flat",description:"Lay your shirt flat on your bed."},[n.SET_ON,n.SET_OFF,n.SET_OFF,n.SET_OFF,n.SET_ON,n.SET_OFF,n.SET_OFF,n.SET_OFF,n.SET_ON,n.SET_OFF,n.SET_OFF,n.SET_OFF,n.SET_ON,n.SET_OFF,n.SET_OFF,n.SET_OFF],"sd"),fold:new E({title:"Fold",description:"Fold your shirt. Wouldn't this be easier if the shirt were laid flat?"},[n.SET_OFF,n.IGNORE,n.IGNORE,n.IGNORE,n.IGNORE,n.IGNORE,n.IGNORE,n.IGNORE,n.SET_OFF,n.IGNORE,n.IGNORE,n.IGNORE,n.IGNORE,n.IGNORE,n.IGNORE,n.IGNORE],"sd")},g=a(7),S=a.n(g),x=a(11),C=a(28),T=a(85),_=a(155),I=a(162),P=a(156),w=a(50),k=a(15),G=["classSequence"],R=["parts","currentlyPlayingStep"],H=["parts"];function A(e){var t=e.classSequence,a=(Object(d.a)(e,G),Object(w.chunk)(t,4));return Object(k.jsx)(k.Fragment,{children:a.map((function(e,t){return Object(k.jsx)("tr",{className:"row",children:e.map((function(e,t){return Object(k.jsx)("td",{className:e,children:Object(k.jsx)(T.a,{className:"step",variant:"outlined"})},"col "+t)}))},"row "+t)}))})}function L(e){var t=e.parts,a=e.currentlyPlayingStep,n=Object(d.a)(e,R),c=Object(s.useState)(0),l=Object(N.a)(c,2),O=l[0],i=l[1],F=t[O].steps,u=Object(w.take)(F,16).map((function(e,t){var n="cell ";return n+=r[e]+" ",t===a&&(n+="playing"),n}));return Object(s.createElement)("table",Object(o.a)(Object(o.a)({},n),{},{key:O}),Object(k.jsx)("caption",{children:Object(k.jsx)(_.a,{position:"relative",children:Object(k.jsx)(I.a,{value:O,onChange:function(e,t){return i(t)},className:"part-selector",children:t.map((function(e,t){return Object(k.jsx)(P.a,{label:e.sample},"tab "+t)}))})})}),Object(k.jsx)("tbody",{children:Object(k.jsx)(A,{classSequence:u})}))}var D={bd:"e4",ch:"d4",sd:"c4"},B=new C.a({urls:{e4:"BD/E808_BD[short]-03.wav",d4:"CH/E808_CH-06.wav",c4:"SD/E808_SD-03.wav"},baseUrl:"/mfgj202106/samples/808/"}).toDestination();function q(e){var t=e.parts,a=Object(d.a)(e,H);Object(s.useEffect)((function(){return C.c.bpm.value=79,C.c.start(),function(){C.c.stop()}}),[]);var r=Object(s.useState)(null),n=Object(N.a)(r,2),c=n[0],l=n[1],O=Object(s.useState)(!1),i=Object(N.a)(O,2),F=i[0],u=i[1],j=function(){var e=Object(x.a)(S.a.mark((function e(){var a;return S.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=new C.b((function(e,a){if(a>=16)return l(null),void u(!1);l(a);var r,n=Object(v.a)(t);try{for(n.s();!(r=n.n()).done;){var s=r.value;s.steps[a]&&B.triggerAttackRelease(D[s.sample],"16n",e)}}catch(c){n.e(c)}finally{n.f()}}),Object(w.range)(17),"16n"),u(!0),C.d(),a.loop=!1,a.start();case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(L,Object(o.a)({parts:t,currentlyPlayingStep:c},a)),Object(k.jsx)(b.a,{variant:"contained",onClick:j,disabled:F,children:F?"Playing":"Play"})]})}var J=["cards","buttonLabel","onClickCard"];function M(e){var t,a=e.cardId,r=e.cardIndex,s=e.buttonLabel,c=e.onClickCard,l=void 0===c?void 0:c,O=y[a],i=null===(t=O.pattern)||void 0===t?void 0:t.map((function(e){return"cell "+n[e]}));return Object(k.jsxs)(u.a,{variant:"outlined",className:"card",children:[Object(k.jsxs)(j.a,{children:[Object(k.jsx)("h2",{children:O.title}),i&&Object(k.jsx)("table",{className:"pattern",children:Object(k.jsx)(A,{classSequence:i})}),Object(k.jsx)("p",{children:O.description})]}),Object(k.jsx)(p.a,{children:Object(k.jsx)(b.a,{variant:"contained",onClick:function(){return l(r)},disabled:!l,children:s})})]})}function U(e){var t=e.cards,a=e.buttonLabel,r=e.onClickCard,n=void 0===r?void 0:r,s=Object(d.a)(e,J);return Object(k.jsx)(F.a,Object(o.a)(Object(o.a)({container:!0},s),{},{children:t.map((function(e,t){return Object(k.jsx)(M,{cardId:e,cardIndex:t,buttonLabel:a,onClickCard:n})}))}))}var W=a(12),z=[{title:"The Laundry",targetParts:[{sample:"sd",steps:[r.OFF,r.OFF,r.OFF,r.OFF,r.ON,r.OFF,r.OFF,r.OFF,r.OFF,r.OFF,r.OFF,r.OFF,r.ON,r.OFF,r.OFF,r.OFF]}],startingHand:["layFlat","fold"]},{title:"The Floor",targetParts:[{sample:"bd",steps:[r.ON,r.OFF,r.OFF,r.OFF,r.ON,r.OFF,r.OFF,r.OFF,r.ON,r.OFF,r.OFF,r.OFF,r.ON,r.OFF,r.OFF,r.OFF]}],startingHand:["sweep","sweep","sweep","sweep"]},{title:"The Dishes",targetParts:[{sample:"ch",steps:[r.ON,r.OFF,r.ACCENT,r.OFF,r.ON,r.OFF,r.ACCENT,r.OFF,r.ON,r.OFF,r.ACCENT,r.OFF,r.ON,r.OFF,r.ACCENT,r.OFF]}],startingHand:["rinse","scour","rinse","scour"]},{title:"Putting it All Together",targetParts:[{sample:"sd",steps:[r.OFF,r.OFF,r.OFF,r.OFF,r.ON,r.OFF,r.OFF,r.OFF,r.OFF,r.OFF,r.OFF,r.OFF,r.ON,r.OFF,r.OFF,r.OFF]},{sample:"bd",steps:[r.ON,r.OFF,r.OFF,r.OFF,r.OFF,r.OFF,r.OFF,r.OFF,r.ON,r.OFF,r.OFF,r.OFF,r.OFF,r.OFF,r.OFF,r.OFF]},{sample:"ch",steps:[r.ON,r.OFF,r.ON,r.OFF,r.ON,r.OFF,r.ON,r.OFF,r.ON,r.OFF,r.ON,r.OFF,r.ON,r.OFF,r.ON,r.ON]}],startingHand:["roomba","dishwasher","laundryBot"]}],K=function(e){var t=z[e-1],a=t.targetParts.map((function(e){return{sample:e.sample,steps:Array.from({length:16},(function(){return r.OFF}))}}));return Object(o.a)(Object(o.a)({},t),{},{playerParts:a,playerHand:t.startingHand,playerSchedule:[],activePart:null})},Q={moves:{playCard:function(e,t,a){var r=e.playerHand[a];y[r].playCard(e),e.playerHand.splice(a,1),e.playerSchedule.push(r)},removeCard:function(e,t,a){var r=K(t.turn);r.playerHand=Object(W.a)(e.playerHand);var n=e.playerSchedule[a];r.playerHand.push(n);var s,c=Object(v.a)(e.playerSchedule.entries());try{for(c.s();!(s=c.n()).done;){var l=Object(N.a)(s.value,2),O=l[0],i=l[1];if(O!==a){var F=y[i];console.log(r),F.playCard(r),console.log(r),r.playerSchedule.push(i)}}}catch(o){c.e(o)}finally{c.f()}return r},commitSchedule:function(e,t){var a,r;(function(e){var t,a=Object(v.a)(e.targetParts.entries());try{for(a.s();!(t=a.n()).done;)for(var r=Object(N.a)(t.value,2),n=r[0],s=r[1],c=e.playerParts[n],l=0;l<16;l++)if(c.steps[l]!==s.steps[l])return!1}catch(O){a.e(O)}finally{a.f()}return!0})(e)&&(null===(a=t.events)||void 0===a||null===(r=a.endTurn)||void 0===r||r.call(a))}},turn:{onBegin:function(e,t){return K(t.turn)}}},V=Object(i.a)({game:Q,board:function(e){var t=e.G,a=(e.ctx,e.moves),r=t.playerParts,n=t.targetParts;return Object(k.jsxs)(F.a,{container:!0,children:[Object(k.jsxs)(F.a,{item:!0,xs:2,className:"current-parts",children:[Object(k.jsx)("h1",{children:"Current"}),Object(k.jsx)(q,{parts:r,className:"sampler player"})]}),Object(k.jsxs)(F.a,{item:!0,xs:2,className:"target-parts",children:[Object(k.jsx)("h1",{children:"Goal"}),Object(k.jsx)(q,{parts:n,className:"sampler goal"})]}),Object(k.jsx)(F.a,{item:!0,xs:6}),Object(k.jsxs)(F.a,{item:!0,xs:12,className:"hand-area",children:[Object(k.jsx)("h1",{children:"Hand"}),Object(k.jsx)(U,{cards:t.playerHand,onClickCard:a.playCard,buttonLabel:"Enqueue",className:"hand"})]}),Object(k.jsxs)(F.a,{item:!0,xs:12,className:"schedule-area",children:[Object(k.jsx)("h1",{children:"Schedule"}),Object(k.jsx)(U,{cards:t.playerSchedule,onClickCard:a.removeCard,buttonLabel:"Remove",className:"schedule"})]})]})},numPlayers:1,debug:!0}),X=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,164)).then((function(t){var a=t.getCLS,r=t.getFID,n=t.getFCP,s=t.getLCP,c=t.getTTFB;a(e),r(e),n(e),s(e),c(e)}))};O.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(V,{})}),document.getElementById("root")),X()},96:function(e,t,a){},97:function(e,t,a){}},[[139,1,2]]]);
//# sourceMappingURL=main.78a454ab.chunk.js.map